import{j as e,A as a,m as n}from"./chunk-DrBkpLm2.js";import{r,u as t}from"./chunk-CMRBzt0a.js";import i from"./AdminPanel-DpdWBIYu.js";import{b as l}from"./chunk-Bt6U1h1N.js";import{F as s}from"./chunk-B12jDwHr.js";import{x as d,y as c,q as o,z as h,h as m,k as u,l as b}from"./chunk-Ca7r8q3n.js";import"./chunk-ouJazw0A.js";import"./chunk-D-ukXXUr.js";const g=()=>{var g;const[N,w]=r.useState(null),[f,y]=r.useState("dashboard"),[x,k]=r.useState([]),[C,A]=r.useState(!0),[E,M]=r.useState(""),[S,R]=r.useState(!1),[D,U]=r.useState(!1),[j,V]=r.useState(null),[z,L]=r.useState({page:1,limit:10,search:"",role:"all"}),[P,O]=r.useState({}),[q,Y]=r.useState(""),[$,B]=r.useState([]),[F,J]=r.useState([]),[T,I]=r.useState(!1),[Q,W]=r.useState(!1),X=t();r.useEffect(()=>{const e=JSON.parse(localStorage.getItem("user"));e?(w(e),A(!1)):X("/admin/login")},[X]);const G=async()=>{try{M("");const e=await l.getAllUsers(z);k(e.users||[]),O(e.pagination||{})}catch(e){M("Error fetching users: "+e.message),k([])}},H=async e=>{try{M(""),await l.createUser(e),R(!1),G()}catch(a){M("Error creating user: "+a.message)}},K=async()=>{try{I(!0),M("");const e=await l.getAllArtworks();Array.isArray(e)?B(e):e&&Array.isArray(e.data)?B(e.data):B([])}catch(e){M("Error fetching artworks: "+e.message),B([])}finally{I(!1)}},Z=async()=>{try{I(!0),M("");const e=await l.getAllEvents({creatorRole:"Artist",upcoming:"false"});J(Array.isArray(e)?e:[])}catch(e){M("Error fetching events: "+e.message),J([])}finally{I(!1)}};r.useEffect(()=>{"users"===f&&"Admin"===(null==N?void 0:N.role)&&G()},[f,z,N]),r.useEffect(()=>{"artworks"===q?K():"events"===q&&Z()},[q]);const _=()=>{const a=Array.from({length:20},(e,a)=>({id:a,size:4*Math.random()+2,color:["rgba(19, 72, 86, 0.6)","rgba(224, 82, 100, 0.6)","rgba(244, 140, 140, 0.6)","rgba(29, 124, 111, 0.6)","rgba(255, 215, 0, 0.6)"][Math.floor(5*Math.random())],initialX:100*Math.random(),initialY:100*Math.random(),animationDelay:5*Math.random(),animationDuration:8+6*Math.random()}));return e.jsx("div",{className:"fixed inset-0 pointer-events-none z-0",children:a.map(a=>e.jsx(n.div,{className:"absolute rounded-full opacity-40",style:{width:a.size+"px",height:a.size+"px",backgroundColor:a.color,left:a.initialX+"%",top:a.initialY+"%",filter:"blur(0.5px)",boxShadow:`0 0 ${2*a.size}px ${a.color}`},animate:{y:[0,-80,0],x:[0,25,-25,0],opacity:[.4,.7,.4],scale:[1,1.3,1]},transition:{duration:a.animationDuration,repeat:1/0,delay:a.animationDelay,ease:"easeInOut"}},a.id))})};if(C||!N)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#F48C8C]/10 via-white to-[#134856]/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-[#E05264] mx-auto mb-4"}),e.jsx("p",{className:"text-2xl font-dm-serif text-transparent bg-clip-text bg-gradient-to-r from-[#E05264] to-[#134856]",children:"Loading admin dashboard..."})]})});const ee=[{id:"dashboard",label:"Dashboard",icon:d},..."Admin"===N.role?[{id:"reports",label:"Reports",icon:c},{id:"users",label:"User Management",icon:o},{id:"content",label:"Content Management",icon:h}]:[],..."Artist"===N.role?[{id:"content",label:"My Content",icon:h}]:[]],ae=[{id:"settings",label:"Settings",icon:u},{id:"logout",label:"Logout",icon:b,isAction:!0}],ne=e=>{"logout"===e?(localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userRole"),X("/")):(y(e),Y("")),W(!1)};return e.jsxs("div",{className:"min-h-screen bg-blush-peach",children:[e.jsx(_,{}),e.jsx(s,{}),e.jsx("button",{onClick:()=>W(!Q),className:"md:hidden fixed top-4 left-4 z-50 p-3 bg-white rounded-2xl shadow-lg text-[#134856] hover:text-[#E05264] transition-all duration-200",children:e.jsx(m,{className:"w-5 h-5"})}),Q&&e.jsx("div",{className:"fixed inset-0 z-30 bg-gray-600 bg-opacity-50 md:hidden",onClick:()=>W(!1)}),e.jsx("div",{className:"px-10 mt-10 mx-auto pb-10",children:e.jsx("div",{className:"rounded-3xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"flex",children:[e.jsx("aside",{className:(Q?"translate-x-0":"-translate-x-full")+" fixed inset-y-0 left-0 z-40 w-80 transform transition-transform duration-300 ease-in-out md:translate-x-0 md:static md:w-80 md:flex-shrink-0 bg-gradient-to-b from-[#134856] to-[#E05264]",children:e.jsxs("div",{className:"h-full px-6 py-8 overflow-y-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-3xl font-bold font-dm-serif text-white",children:"Admin Panel"}),e.jsx("p",{className:"text-white text-sm mt-1 font-lora",children:"Manage platform operations"}),e.jsx("div",{className:"mt-4 h-px bg-white/20"}),e.jsxs("div",{className:"mt-4 flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(o,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate font-dm-serif",children:null==N?void 0:N.name}),e.jsxs("p",{className:"text-xs text-white/70 truncate font-lora",children:[null==N?void 0:N.role," Account"]})]})]}),e.jsx("div",{className:"mt-4 h-px bg-white/20"})]}),e.jsxs("nav",{className:"space-y-2",children:[ee.map(a=>{const n=a.icon,r=f===a.id;return e.jsxs("button",{onClick:()=>ne(a.id),className:"w-full flex items-center px-4 py-3 text-left rounded-2xl transition-all duration-200 font-lora "+(r?"bg-gradient-to-r from-[#E05264] to-[#E05264]/90 text-white shadow-md transform scale-[1.02]":"text-white hover:bg-white/10 hover:shadow-sm"),children:[e.jsx(n,{className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-medium",children:a.label})]},a.id)}),e.jsx("div",{className:"mt-6 mb-4 h-px bg-white/20"}),ae.map(a=>{const n=a.icon,r=f===a.id,t="logout"===a.id;return e.jsxs("button",{onClick:()=>ne(a.id),className:"w-full flex items-center px-4 py-3 text-left rounded-2xl transition-all duration-200 font-lora "+(t?"text-white hover:bg-red-500/20 hover:text-red-200":r?"bg-gradient-to-r from-[#E05264] to-[#E05264]/90 text-white shadow-md transform scale-[1.02]":"text-white hover:bg-white/10 hover:shadow-sm"),children:[e.jsx(n,{className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-medium",children:a.label})]},a.id)})]})]})}),e.jsx("div",{className:"hidden md:block w-px bg-gray-200"}),e.jsx("main",{className:"flex-1 flex flex-col min-w-0 bg-white",children:e.jsx(a,{mode:"wait",children:e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"bg-gradient-to-r from-[#134856] to-[#E05264] px-8 py-6 border-b border-gray-100",children:[e.jsx("h2",{className:"text-4xl font-bold text-white capitalize font-dm-serif",children:null==(g=[...ee,...ae].find(e=>e.id===f&&!e.isAction))?void 0:g.label}),e.jsxs("p",{className:"text-white text-sm mt-1 font-lora",children:["dashboard"===f&&"Overview of your admin operations and system status","reports"===f&&"Review and manage user reports and platform moderation","users"===f&&"Manage user accounts, roles, and permissions","content"===f&&"Oversee artworks and events submitted by users","settings"===f&&"Configure your admin account preferences"]})]}),e.jsx("div",{className:"flex-1 p-8",children:(()=>{switch(f){case"dashboard":default:return e.jsxs("div",{className:"dashboard-overview",children:[e.jsxs("h2",{children:["Welcome, ",N.name,"!"]}),e.jsxs("p",{children:["Role: ",e.jsx("span",{className:"role-badge",children:N.role})]}),e.jsxs("div",{className:"dashboard-cards",children:[e.jsxs("div",{className:"dashboard-card",children:[e.jsx("h3",{children:"Quick Stats"}),e.jsx("p",{children:"Your dashboard overview goes here"})]}),"Admin"===N.role&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dashboard-card",children:[e.jsx("h3",{children:"System Status"}),e.jsx("p",{children:"All systems operational"})]}),e.jsxs("div",{className:"dashboard-card",children:[e.jsx("h3",{children:"Recent Activity"}),e.jsx("p",{children:"Monitor platform activity"})]})]}),"Artist"===N.role&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dashboard-card",children:[e.jsx("h3",{children:"Your Artworks"}),e.jsx("p",{children:"Manage your art submissions"})]}),e.jsxs("div",{className:"dashboard-card",children:[e.jsx("h3",{children:"Performance"}),e.jsx("p",{children:"View your artwork statistics"})]})]})]})]});case"reports":return e.jsx(i,{});case"users":return"Admin"!==N.role?e.jsx("div",{className:"access-limited",children:e.jsx("p",{children:"Limited access: You can only view your own profile."})}):e.jsxs("div",{className:"user-management",children:[e.jsxs("div",{className:"admin-header",children:[e.jsx("h2",{children:"User Management"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>R(!0),children:"Create New User"})]}),E&&e.jsx("div",{className:"error-message",children:E}),e.jsxs("div",{className:"user-controls",children:[e.jsx("input",{type:"text",placeholder:"Search users by name or email...",value:z.search,onChange:e=>L(a=>({...a,search:e.target.value,page:1})),className:"search-input"}),e.jsxs("select",{value:z.role,onChange:e=>L(a=>({...a,role:e.target.value,page:1})),className:"role-filter",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"Admin",children:"Admin"}),e.jsx("option",{value:"Artist",children:"Artist"}),e.jsx("option",{value:"Viewer",children:"Viewer"})]})]}),C?e.jsx("div",{className:"loading",children:"Loading users..."}):e.jsx("div",{className:"users-table-container",children:e.jsxs("table",{className:"users-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Joined"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:0===x.length?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"20px"},children:"No users found"})}):x.map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:a.name}),e.jsx("td",{children:a.email}),e.jsx("td",{children:e.jsx("span",{className:"role-badge "+a.role.toLowerCase(),children:a.role})}),e.jsx("td",{children:e.jsx("span",{className:"status-badge "+(a.isEmailVerified?"verified":"unverified"),children:a.isEmailVerified?"Verified":"Unverified"})}),e.jsx("td",{children:new Date(a.createdAt).toLocaleDateString()}),e.jsx("td",{children:e.jsxs("div",{className:"user-actions",children:[e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>{V(a),U(!0)},disabled:a.t===N.id,children:"Change Role"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this user?"))try{M(""),await l.deleteUser(e),G()}catch(a){M("Error deleting user: "+a.message)}})(a.t),disabled:a.t===N.id,children:"Delete"})]})})]},a.t))})]})}),P.totalPages>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{onClick:()=>L(e=>({...e,page:e.page-1})),disabled:1===z.page,className:"btn btn-sm",children:"Previous"}),e.jsxs("span",{children:["Page ",z.page," of ",P.totalPages]}),e.jsx("button",{onClick:()=>L(e=>({...e,page:e.page+1})),disabled:z.page>=P.totalPages,className:"btn btn-sm",children:"Next"})]}),S&&e.jsx(p,{onClose:()=>R(!1),onSubmit:H,error:E}),D&&j&&e.jsx(v,{user:j,onClose:()=>{U(!1),V(null)},onSubmit:e=>(async(e,a)=>{try{M(""),await l.updateUserRole(e,a),U(!1),V(null),G()}catch(n){M("Error updating role: "+n.message)}})(j.t,e),error:E})]});case"content":return"Admin"!==N.role?e.jsx("div",{className:"access-limited",children:e.jsx("p",{children:"Only admins can manage content."})}):q?"artworks"===q?e.jsxs("div",{className:"content-management",children:[e.jsxs("div",{className:"content-header",children:[e.jsx("h2",{children:"Manage Artworks"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>Y(""),children:"Back to Content Management"})]}),E&&e.jsx("div",{className:"error-message",children:E}),T?e.jsx("div",{className:"loading",children:"Loading artworks..."}):e.jsxs("div",{className:"content-list",children:[e.jsxs("p",{className:"content-count",children:["Total Artworks: ",$.length]}),0===$.length?e.jsx("div",{className:"no-content",children:e.jsx("p",{children:"No artworks found."})}):e.jsx("div",{className:"artworks-grid",children:$.map(a=>{var n;return e.jsxs("div",{className:"artwork-card",children:[a.imageUrl&&e.jsx("img",{src:a.imageUrl,alt:a.title,className:"artwork-image",onError:e=>{e.target.style.display="none"}}),e.jsxs("div",{className:"artwork-info",children:[e.jsx("h4",{children:a.title}),e.jsxs("p",{children:[e.jsx("strong",{children:"Artist:"})," ",(null==(n=a.artist)?void 0:n.name)||"Unknown"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Category:"})," ",a.category]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Medium:"})," ",a.medium]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price:"})," $",a.price||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Uploaded:"})," ",new Date(a.createdAt).toLocaleDateString()]}),e.jsx("div",{className:"artwork-actions",children:e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this artwork?"))try{M(""),await l.deleteArtwork(e),K()}catch(a){M("Error deleting artwork: "+a.message)}})(a.t),children:"Delete"})})]})]},a.t)})})]})]}):"events"===q?e.jsxs("div",{className:"content-management",children:[e.jsxs("div",{className:"content-header",children:[e.jsx("h2",{children:"Manage Events"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>Y(""),children:"Back to Content Management"})]}),E&&e.jsx("div",{className:"error-message",children:E}),T?e.jsx("div",{className:"loading",children:"Loading events..."}):e.jsxs("div",{className:"content-list",children:[e.jsxs("p",{className:"content-count",children:["Total Events: ",F.length]}),0===F.length?e.jsxs("div",{className:"no-content",children:[e.jsx("p",{children:"No events created by artists found."}),e.jsx("p",{children:e.jsx("small",{children:"Only events created by artists (not admins) are shown here."})})]}):e.jsx("div",{className:"events-list",children:F.map(a=>e.jsx("div",{className:"event-card",children:e.jsxs("div",{className:"event-info",children:[e.jsx("h4",{children:a.title}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(a.date).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",a.location.venue,", ",a.location.city,", ",a.location.state]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price:"})," ",a.price?"$"+a.price:"Free"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",a.description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created:"})," ",new Date(a.createdAt).toLocaleDateString()]}),e.jsx("div",{className:"event-actions",children:e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this event?"))try{M(""),await l.deleteEvent(e),Z()}catch(a){M("Error deleting event: "+a.message)}})(a.t),children:"Delete"})})]})},a.t))})]})]}):null:e.jsxs("div",{className:"content-management",children:[e.jsx("h2",{children:"Content Management"}),e.jsx("p",{children:"Select what you'd like to manage:"}),e.jsxs("div",{className:"content-actions",children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>Y("artworks"),children:"Manage Artworks"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>Y("events"),children:"Manage Events"})]})]});case"settings":return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Account Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your admin account preferences and settings."}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{className:"px-4 py-2 bg-[#E05264] text-white rounded-lg hover:bg-[#E05264]/90 transition-colors",children:"Coming Soon"})})]})})}})()})]},f)})})]})})})]})},p=({onClose:a,onSubmit:n,error:t})=>{const[i,l]=r.useState({name:"",email:"",password:"",role:"Viewer"}),[s,d]=r.useState(!1);return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Create New User"}),e.jsx("button",{className:"close-btn",onClick:a,children:"×"})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!s){d(!0);try{await n(i),l({name:"",email:"",password:"",role:"Viewer"})}finally{d(!1)}}},className:"modal-body",children:[t&&e.jsx("div",{className:"error-message",children:t}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name:"}),e.jsx("input",{type:"text",value:i.name,onChange:e=>l(a=>({...a,name:e.target.value})),required:!0,disabled:s})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",value:i.email,onChange:e=>l(a=>({...a,email:e.target.value})),required:!0,disabled:s})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password:"}),e.jsx("input",{type:"password",value:i.password,onChange:e=>l(a=>({...a,password:e.target.value})),required:!0,minLength:"6",disabled:s})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Role:"}),e.jsxs("select",{value:i.role,onChange:e=>l(a=>({...a,role:e.target.value})),disabled:s,children:[e.jsx("option",{value:"Viewer",children:"Viewer"}),e.jsx("option",{value:"Artist",children:"Artist"}),e.jsx("option",{value:"Admin",children:"Admin"})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:a,disabled:s,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:s,children:s?"Creating...":"Create User"})]})]})]})})},v=({user:a,onClose:n,onSubmit:t,error:i})=>{const[l,s]=r.useState(a.role),[d,c]=r.useState(!1);return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Change User Role"}),e.jsx("button",{className:"close-btn",onClick:n,children:"×"})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!d&&l!==a.role){c(!0);try{await t(l)}finally{c(!1)}}},className:"modal-body",children:[i&&e.jsx("div",{className:"error-message",children:i}),e.jsxs("p",{children:[e.jsx("strong",{children:"User:"})," ",a.name," (",a.email,")"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Current Role:"})," ",a.role]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"New Role:"}),e.jsxs("select",{value:l,onChange:e=>s(e.target.value),disabled:d,children:[e.jsx("option",{value:"Viewer",children:"Viewer"}),e.jsx("option",{value:"Artist",children:"Artist"}),e.jsx("option",{value:"Admin",children:"Admin"})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:n,disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d||l===a.role,children:d?"Updating...":"Update Role"})]})]})]})})};export{g as default};
