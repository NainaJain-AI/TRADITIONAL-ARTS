import{j as e,m as t,A as a}from"./chunk-DVxuGNgR.js";import{r,u as n}from"./chunk-Bdcpd3Jy.js";import l from"./AdminPanel-d6iitSO9.js";import{u as s,p as i,x as d,G as c,H as o,y as m,h,D as u,v as g,I as p,J as x,E as b,o as v,m as N,K as f,L as y,r as w,s as k,q as C}from"./index-BxKwhLk7.js";import{F as A}from"./chunk-CcL9Otje.js";import{a as j}from"./chunk-BMgD4wMx.js";import"./chunk-Boz1BxA5.js";import"./chunk-DsC01Si0.js";import"./chunk-B7Q-YYjA.js";import"./chunk-CM-yfVV2.js";const E=j.create({baseURL:"http://localhost:5050"});E.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer "+t),e});const S=()=>{const[a,n]=r.useState([]),[l,b]=r.useState(!0),[v,N]=r.useState("pending"),[f,y]=r.useState(null),[w,k]=r.useState({total:0,pending:0,approved:0,rejected:0}),{user:C}=s();r.useEffect(()=>{"Admin"===(null==C?void 0:C.role)&&(A(),j())},[C,v]);const A=async()=>{try{b(!0);const e=await(async(e={})=>(await E.get("/verification/pending",{params:e})).data)();e.success&&n(e.pendingRequests||[])}catch(e){}finally{b(!1)}},j=async()=>{try{const e=await(async()=>(await E.get("/verification/stats")).data)();e.success&&k(e.stats)}catch(e){}},S=async(e,t,a="")=>{try{const r=t?"approve":"reject",n=await(async(e,t,a)=>(await E.post("/verification/review/"+e,{action:t,notes:a})).data)(e,r,a);n.success?(A(),j(),y(null),alert(`Request ${t?"approved":"rejected"} successfully!`)):alert(n.message||"Failed to process request")}catch(r){alert("Failed to process request")}},R=({request:a})=>{var r,n;return e.jsx(t.div,{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden",whileHover:{y:-2},initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:a.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(a.name||"User")}&background=134856&color=fff`,alt:a.name,className:"w-12 h-12 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600",children:a.email})]})]}),e.jsx("span",{className:`\n            px-3 py-1 rounded-full text-xs font-medium\n            ${"pending"===a.verificationStatus?"bg-yellow-100 text-yellow-800":""}\n            ${"approved"===a.verificationStatus?"bg-green-100 text-green-800":""}\n            ${"rejected"===a.verificationStatus?"bg-red-100 text-red-800":""}\n          `,children:(null==(r=a.verificationStatus)?void 0:r.charAt(0).toUpperCase())+(null==(n=a.verificationStatus)?void 0:n.slice(1))})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[a.artistName&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Artist Name:"}),e.jsx("p",{className:"text-sm text-gray-900",children:a.artistName})]}),a.specialization&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Specialization:"}),e.jsx("p",{className:"text-sm text-gray-900",children:a.specialization})]}),a.experience&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Experience:"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[a.experience," years"]})]}),a.portfolio&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Portfolio:"}),e.jsxs("a",{href:a.portfolio,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:["View Portfolio ",e.jsx(c,{size:10})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Documents:"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:a.documents&&a.documents.map((t,a)=>e.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs hover:bg-blue-100",children:[e.jsx(o,{size:10}),"Document ",a+1,e.jsx(m,{size:10})]},a))})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-4",children:[e.jsxs("span",{children:["Submitted: ",new Date(a.createdAt).toLocaleDateString()]}),a.reviewedAt&&e.jsxs("span",{children:["Reviewed: ",new Date(a.reviewedAt).toLocaleDateString()]})]}),a.adminReason&&e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Admin Note:"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:a.adminReason})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>y(a),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(h,{size:14}),"View Details"]}),"pending"===a.status&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>S(a.t,!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(u,{size:14}),"Approve"]}),e.jsxs("button",{onClick:()=>y(a),className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(g,{size:14}),"Reject"]})]})]})]})})},D=({request:a,onClose:n})=>{var l,s,i,d,c;const[h,u]=r.useState(""),[b,v]=r.useState(null),N=e=>{e||h.trim()?S(a.t,e,h):alert("Please provide a reason for rejection")};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx(t.div,{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Verification Request Details"}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:e.jsx(g,{size:20})})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("img",{src:(null==(l=a.userId)?void 0:l.avatar)||`https://ui-avatars.com/api/?name=${encodeURIComponent((null==(s=a.userId)?void 0:s.name)||"User")}&background=134856&color=fff`,alt:null==(i=a.userId)?void 0:i.name,className:"w-16 h-16 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:null==(d=a.userId)?void 0:d.name}),e.jsx("p",{className:"text-gray-600",children:null==(c=a.userId)?void 0:c.email}),e.jsx("span",{className:`\n                    inline-block px-2 py-1 rounded-full text-xs font-medium mt-1\n                    ${"pending"===a.status?"bg-yellow-100 text-yellow-800":""}\n                    ${"approved"===a.status?"bg-green-100 text-green-800":""}\n                    ${"rejected"===a.status?"bg-red-100 text-red-800":""}\n                  `,children:a.status.charAt(0).toUpperCase()+a.status.slice(1)})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries({"Artist Name":a.artistName,Specialization:a.specialization,Experience:a.experience?a.experience+" years":null,Portfolio:a.portfolio,"Social Media":a.socialMedia,Bio:a.bio}).map(([t,a])=>a&&e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("span",{className:"font-medium text-gray-700",children:[t,":"]}),"Portfolio"===t?e.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:text-blue-800 break-all",children:a}):e.jsx("p",{className:"text-gray-900 mt-1",children:a})]},t))}),a.documents&&a.documents.length>0&&e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Documents:"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:a.documents.map((t,a)=>e.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-2 bg-blue-50 text-blue-700 rounded hover:bg-blue-100",children:[e.jsx(o,{}),e.jsxs("span",{className:"text-sm",children:["Document ",a+1]}),e.jsx(m,{size:12})]},a))})]})]}),"pending"===a.status&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Note (optional for approval, required for rejection):"}),e.jsx("textarea",{value:h,onChange:e=>u(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Add a note about your decision..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>N(!0),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(p,{}),"Approve Request"]}),e.jsxs("button",{onClick:()=>N(!1),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(x,{}),"Reject Request"]})]})]})]})})})};return"Admin"!==(null==C?void 0:C.role)?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(i,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"Access denied. Admin privileges required."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Verification Management"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:w.total}),e.jsx("div",{className:"text-sm text-blue-700",children:"Total Requests"})]}),e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:w.pending}),e.jsx("div",{className:"text-sm text-yellow-700",children:"Pending"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:w.approved}),e.jsx("div",{className:"text-sm text-green-700",children:"Approved"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:w.rejected}),e.jsx("div",{className:"text-sm text-red-700",children:"Rejected"})]})]})]}),e.jsx("div",{className:"flex bg-gray-100 rounded-lg p-1",children:["pending","approved","rejected","all"].map(t=>e.jsxs("button",{onClick:()=>N(t),className:`\n              flex-1 py-2 px-4 rounded-md transition-all duration-200 capitalize\n              ${v===t?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}\n            `,children:[t," (","all"===t?w.total:"pending"===t?w.pending:"approved"===t?w.approved:w.rejected,")"]},t))}),l?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading verification requests..."})]}):0===a.length?e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[e.jsx(d,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsxs("p",{className:"text-gray-600",children:["No ","all"!==v?v:""," verification requests found."]})]}):e.jsx("div",{className:"grid gap-6 md:grid-cols-1 lg:grid-cols-2",children:a.map(t=>e.jsx(R,{request:t},t.t))}),f&&e.jsx(D,{request:f,onClose:()=>y(null)})]})},R=()=>{var s;const[i,d]=r.useState(null),[c,m]=r.useState("dashboard"),[h,u]=r.useState([]),[g,p]=r.useState(!1),[x,j]=r.useState(""),[E,R]=r.useState(!1),[U,z]=r.useState(!1),[q,P]=r.useState(null),[$,F]=r.useState({page:1,limit:10,search:"",role:"all"}),[L,O]=r.useState({}),[T,V]=r.useState(""),[I,B]=r.useState([]),[_,J]=r.useState([]),[H,Y]=r.useState(!1),[G,K]=r.useState(!1),[Q,W]=r.useState({totalUsers:0,totalArtworks:0,totalEvents:0,recentUsers:[],systemStatus:"operational"}),X=n();r.useEffect(()=>{const e=JSON.parse(localStorage.getItem("user"));if(e){if(d(e),p(!1),"Admin"!==e.role)return void X("/");Z()}else X("/")},[X]);const Z=async()=>{var e,t,a,r,n;try{const[l,s,i,d]=await Promise.all([b.getAllUsers({limit:100}),b.getAllUsers({limit:5,sortBy:"createdAt",sortOrder:"desc"}),b.getAllArtworks(),b.getAllEvents()]),c=(null==(e=l.pagination)?void 0:e.totalCount)||(null==(t=l.users)?void 0:t.length)||0,o=Array.isArray(i)?i.length:(null==(a=i.data)?void 0:a.length)||0,m=Array.isArray(d)?d.length:(null==(r=d.data)?void 0:r.length)||0,h=(null==(n=s.users)?void 0:n.slice(0,5))||[];W({totalUsers:c,totalArtworks:o,totalEvents:m,recentUsers:h,systemStatus:"operational"})}catch(l){W(e=>({...e,systemStatus:"error"}))}},ee=async()=>{try{j("");const e=await b.getAllUsers($);u(e.users||[]),O(e.pagination||{})}catch(e){j("Error fetching users: "+e.message),u([])}},te=async e=>{try{j(""),await b.createUser(e),R(!1),ee()}catch(t){j("Error creating user: "+t.message)}},ae=async()=>{try{Y(!0),j("");const e=await b.getAllArtworks();Array.isArray(e)?B(e):e&&Array.isArray(e.data)?B(e.data):B([])}catch(e){j("Error fetching artworks: "+e.message),B([])}finally{Y(!1)}},re=async()=>{try{Y(!0),j("");const e=await b.getAllEvents({creatorRole:"Artist",upcoming:"false"});J(Array.isArray(e)?e:[])}catch(e){j("Error fetching events: "+e.message),J([])}finally{Y(!1)}};r.useEffect(()=>{"users"===c&&i&&ee()},[c,$,i]),r.useEffect(()=>{"artworks"===T?ae():"events"===T&&re()},[T]);const ne=()=>{const a=Array.from({length:20},(e,t)=>({id:t,size:4*Math.random()+2,color:["rgba(19, 72, 86, 0.6)","rgba(224, 82, 100, 0.6)","rgba(244, 140, 140, 0.6)","rgba(29, 124, 111, 0.6)","rgba(255, 215, 0, 0.6)"][Math.floor(5*Math.random())],initialX:100*Math.random(),initialY:100*Math.random(),animationDelay:5*Math.random(),animationDuration:8+6*Math.random()}));return e.jsx("div",{className:"fixed inset-0 pointer-events-none z-0",children:a.map(a=>e.jsx(t.div,{className:"absolute rounded-full opacity-40",style:{width:a.size+"px",height:a.size+"px",backgroundColor:a.color,left:a.initialX+"%",top:a.initialY+"%",filter:"blur(0.5px)",boxShadow:`0 0 ${2*a.size}px ${a.color}`},animate:{y:[0,-80,0],x:[0,25,-25,0],opacity:[.4,.7,.4],scale:[1,1.3,1]},transition:{duration:a.animationDuration,repeat:1/0,delay:a.animationDelay,ease:"easeInOut"}},a.id))})};if(g||!i)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#F48C8C]/10 via-white to-[#134856]/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-[#E05264] mx-auto mb-4"}),e.jsx("p",{className:"text-2xl font-dm-serif text-transparent bg-clip-text bg-gradient-to-r from-[#E05264] to-[#134856]",children:"Loading admin dashboard..."})]})});const le=[{id:"dashboard",label:"Dashboard",icon:f},{id:"reports",label:"Reports",icon:y},{id:"users",label:"User Management",icon:N},{id:"content",label:"Content Management",icon:o},{id:"verification-admin",label:"Verification",icon:o}],se=[{id:"settings",label:"Settings",icon:w},{id:"logout",label:"Logout",icon:k,isAction:!0}],ie=e=>{"logout"===e?(localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userRole"),X("/")):(m(e),V("")),K(!1)};return e.jsxs("div",{className:"min-h-screen bg-blush-peach",children:[e.jsx(ne,{}),e.jsx(A,{}),e.jsx("button",{onClick:()=>K(!G),className:"md:hidden fixed top-4 left-4 z-50 p-3 bg-white rounded-2xl shadow-lg text-[#134856] hover:text-[#E05264] transition-all duration-200",children:e.jsx(v,{className:"w-5 h-5"})}),G&&e.jsx("div",{className:"fixed inset-0 z-30 bg-gray-600 bg-opacity-50 md:hidden",onClick:()=>K(!1)}),e.jsx("div",{className:"px-10 mt-10 mx-auto pb-10",children:e.jsx("div",{className:"rounded-3xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"flex",children:[e.jsx("aside",{className:(G?"translate-x-0":"-translate-x-full")+" fixed inset-y-0 left-0 z-40 w-80 transform transition-transform duration-300 ease-in-out md:translate-x-0 md:static md:w-80 md:flex-shrink-0 bg-gradient-to-b from-[#134856] to-[#E05264]",children:e.jsxs("div",{className:"h-full px-6 py-8 overflow-y-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-3xl font-bold font-dm-serif text-white",children:"Admin Panel"}),e.jsx("p",{className:"text-white text-sm mt-1 font-lora",children:"Manage platform operations"}),e.jsx("div",{className:"mt-4 h-px bg-white/20"}),e.jsxs("div",{className:"mt-4 flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(N,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate font-dm-serif",children:null==i?void 0:i.name}),e.jsxs("p",{className:"text-xs text-white/70 truncate font-lora",children:[null==i?void 0:i.role," Account"]})]})]}),e.jsx("div",{className:"mt-4 h-px bg-white/20"})]}),e.jsxs("nav",{className:"space-y-2",children:[le.map(t=>{const a=t.icon,r=c===t.id;return e.jsxs("button",{onClick:()=>ie(t.id),className:"w-full flex items-center px-4 py-3 text-left rounded-2xl transition-all duration-200 font-lora "+(r?"bg-gradient-to-r from-[#E05264] to-[#E05264]/90 text-white shadow-md transform scale-[1.02]":"text-white hover:bg-white/10 hover:shadow-sm"),children:[e.jsx(a,{className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-medium",children:t.label})]},t.id)}),e.jsx("div",{className:"mt-6 mb-4 h-px bg-white/20"}),se.map(t=>{const a=t.icon,r=c===t.id,n="logout"===t.id;return e.jsxs("button",{onClick:()=>ie(t.id),className:"w-full flex items-center px-4 py-3 text-left rounded-2xl transition-all duration-200 font-lora "+(n?"text-white hover:bg-red-500/20 hover:text-red-200":r?"bg-gradient-to-r from-[#E05264] to-[#E05264]/90 text-white shadow-md transform scale-[1.02]":"text-white hover:bg-white/10 hover:shadow-sm"),children:[e.jsx(a,{className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-medium",children:t.label})]},t.id)})]})]})}),e.jsx("div",{className:"hidden md:block w-px bg-gray-200"}),e.jsx("main",{className:"flex-1 flex flex-col min-w-0 bg-white",children:e.jsx(a,{mode:"wait",children:e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"bg-gradient-to-r from-[#134856] to-[#E05264] px-8 py-6 border-b border-gray-100",children:[e.jsx("h2",{className:"text-4xl font-bold text-white capitalize font-dm-serif",children:null==(s=[...le,...se].find(e=>e.id===c&&!e.isAction))?void 0:s.label}),e.jsxs("p",{className:"text-white text-sm mt-1 font-lora",children:["dashboard"===c&&"Overview of your admin operations and system status","reports"===c&&"Review and manage user reports and platform moderation","users"===c&&"Manage user accounts, roles, and permissions","content"===c&&"Oversee artworks and events submitted by users","settings"===c&&"Configure your admin account preferences"]})]}),e.jsx("div",{className:"flex-1 p-8",children:(()=>{switch(c){case"dashboard":default:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-[#134856] to-[#E05264] rounded-xl p-6 text-white",children:[e.jsxs("h2",{className:"text-3xl font-bold font-dm-serif mb-2",children:["Welcome, ",(null==i?void 0:i.name)||"Admin","!"]}),e.jsxs("p",{className:"font-lora opacity-90",children:["Role: ",e.jsx("span",{className:"bg-white/20 px-3 py-1 rounded-full text-sm font-medium",children:null==i?void 0:i.role})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),e.jsx("p",{className:"text-3xl font-bold text-[#134856]",children:Q.totalUsers})]}),e.jsx("div",{className:"w-12 h-12 bg-[#134856]/10 rounded-lg flex items-center justify-center",children:e.jsx(N,{className:"w-6 h-6 text-[#134856]"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Registered platform users"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Artworks"}),e.jsx("p",{className:"text-3xl font-bold text-[#F48C8C]",children:Q.totalArtworks})]}),e.jsx("div",{className:"w-12 h-12 bg-[#F48C8C]/10 rounded-lg flex items-center justify-center",children:e.jsx(o,{className:"w-6 h-6 text-[#F48C8C]"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Submitted artworks"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Events"}),e.jsx("p",{className:"text-3xl font-bold text-[#1D7C6F]",children:Q.totalEvents})]}),e.jsx("div",{className:"w-12 h-12 bg-[#1D7C6F]/10 rounded-lg flex items-center justify-center",children:e.jsx(C,{className:"w-6 h-6 text-[#1D7C6F]"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Scheduled cultural events"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 font-dm-serif",children:"System Status"}),e.jsx("div",{className:"w-3 h-3 rounded-full "+("operational"===Q.systemStatus?"bg-green-500":"bg-red-500")})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Platform Status"}),e.jsx("span",{className:"text-sm font-medium "+("operational"===Q.systemStatus?"text-green-600":"text-red-600"),children:"operational"===Q.systemStatus?"Operational":"Issues Detected"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Database"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"Connected"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"API Services"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"Running"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 font-dm-serif mb-4",children:"Recent Activity"}),e.jsx("div",{className:"space-y-3",children:Q.recentUsers&&Q.recentUsers.length>0?Q.recentUsers.map((t,a)=>{var r;return e.jsxs("div",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-[#134856] to-[#E05264] rounded-full flex items-center justify-center text-white text-sm font-medium",children:t.name?t.name.charAt(0).toUpperCase():"?"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.name||"Unknown User"}),e.jsxs("p",{className:"text-xs text-gray-500 truncate",children:["New ",(null==(r=t.role)?void 0:r.toLowerCase())||"user"," • ",t.createdAt?new Date(t.createdAt).toLocaleDateString():"Recently"]})]}),e.jsx("div",{className:"w-2 h-2 rounded-full "+("Artist"===t.role?"bg-[#E05264]":"bg-[#134856]")})]},t.t||a)}):e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No recent activity"})})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 font-dm-serif mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>m("users"),className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(N,{className:"w-5 h-5 text-[#134856]"}),e.jsx("span",{className:"font-medium text-gray-700",children:"Manage Users"})]}),e.jsxs("button",{onClick:()=>m("content"),className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(o,{className:"w-5 h-5 text-[#E05264]"}),e.jsx("span",{className:"font-medium text-gray-700",children:"Manage Content"})]}),e.jsxs("button",{onClick:()=>m("reports"),className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(y,{className:"w-5 h-5 text-[#F48C8C]"}),e.jsx("span",{className:"font-medium text-gray-700",children:"View Reports"})]})]})]})]});case"reports":return e.jsx(l,{});case"users":return"Admin"!==i.role?e.jsx("div",{className:"access-limited",children:e.jsx("p",{children:"Limited access: You can only view your own profile."})}):e.jsxs("div",{className:"user-management",children:[e.jsxs("div",{className:"admin-header",children:[e.jsx("h2",{children:"User Management"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>R(!0),children:"Create New User"})]}),x&&e.jsx("div",{className:"error-message",children:x}),e.jsxs("div",{className:"user-controls",children:[e.jsx("input",{type:"text",placeholder:"Search users by name or email...",value:$.search,onChange:e=>F(t=>({...t,search:e.target.value,page:1})),className:"search-input"}),e.jsxs("select",{value:$.role,onChange:e=>F(t=>({...t,role:e.target.value,page:1})),className:"role-filter",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"Admin",children:"Admin"}),e.jsx("option",{value:"Artist",children:"Artist"})]})]}),g?e.jsx("div",{className:"loading",children:"Loading users..."}):e.jsx("div",{className:"users-table-container",children:e.jsxs("table",{className:"users-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Joined"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:0===h.length?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"20px"},children:"No users found"})}):h.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{children:t.email}),e.jsx("td",{children:e.jsx("span",{className:"role-badge "+t.role.toLowerCase(),children:t.role})}),e.jsx("td",{children:e.jsx("span",{className:"status-badge "+(t.isEmailVerified?"verified":"unverified"),children:t.isEmailVerified?"Verified":"Unverified"})}),e.jsx("td",{children:new Date(t.createdAt).toLocaleDateString()}),e.jsx("td",{children:e.jsxs("div",{className:"user-actions",children:[e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>{P(t),z(!0)},disabled:t.t===i.id,children:"Change Role"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this user?"))try{j(""),await b.deleteUser(e),ee()}catch(t){j("Error deleting user: "+t.message)}})(t.t),disabled:t.t===i.id,children:"Delete"})]})})]},t.t))})]})}),L.totalPages>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{onClick:()=>F(e=>({...e,page:e.page-1})),disabled:1===$.page,className:"btn btn-sm",children:"Previous"}),e.jsxs("span",{children:["Page ",$.page," of ",L.totalPages]}),e.jsx("button",{onClick:()=>F(e=>({...e,page:e.page+1})),disabled:$.page>=L.totalPages,className:"btn btn-sm",children:"Next"})]}),E&&e.jsx(D,{onClose:()=>R(!1),onSubmit:te,error:x}),U&&q&&e.jsx(M,{user:q,onClose:()=>{z(!1),P(null)},onSubmit:e=>(async(e,t)=>{try{j(""),await b.updateUserRole(e,t),z(!1),P(null),ee()}catch(a){j("Error updating role: "+a.message)}})(q.t,e),error:x})]});case"content":return"Admin"!==i.role?e.jsx("div",{className:"access-limited",children:e.jsx("p",{children:"Only admins can manage content."})}):T?"artworks"===T?e.jsxs("div",{className:"content-management",children:[e.jsx("div",{className:"content-header",children:e.jsx("h2",{children:"Manage Artworks"})}),x&&e.jsx("div",{className:"error-message",children:x}),H?e.jsx("div",{className:"loading",children:"Loading artworks..."}):e.jsxs("div",{className:"content-list",children:[e.jsxs("p",{className:"content-count",children:["Total Artworks: ",I.length]}),0===I.length?e.jsx("div",{className:"no-content",children:e.jsx("p",{children:"No artworks found."})}):e.jsx("div",{className:"artworks-grid",children:I.map(t=>{var a;return e.jsxs("div",{className:"artwork-card",children:[t.imageUrl&&e.jsx("img",{src:t.imageUrl,alt:t.title,className:"artwork-image",onError:e=>{e.target.style.display="none"}}),e.jsxs("div",{className:"artwork-info",children:[e.jsx("h4",{children:t.title}),e.jsxs("p",{children:[e.jsx("strong",{children:"Artist:"})," ",(null==(a=t.artist)?void 0:a.name)||"Unknown"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Category:"})," ",t.category]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Medium:"})," ",t.medium]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price:"})," $",t.price||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Uploaded:"})," ",new Date(t.createdAt).toLocaleDateString()]}),e.jsx("div",{className:"artwork-actions",children:e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this artwork?"))try{j(""),await b.deleteArtwork(e),ae()}catch(t){j("Error deleting artwork: "+t.message)}})(t.t),children:"Delete"})})]})]},t.t)})})]}),e.jsx("div",{className:"content-footer",style:{marginTop:"20px",textAlign:"center"},children:e.jsx("button",{className:"btn btn-secondary",onClick:()=>V(""),children:"Back to Content Management"})})]}):"events"===T?e.jsxs("div",{className:"content-management",children:[e.jsx("div",{className:"content-header",children:e.jsx("h2",{children:"Manage Events"})}),x&&e.jsx("div",{className:"error-message",children:x}),H?e.jsx("div",{className:"loading",children:"Loading events..."}):e.jsxs("div",{className:"content-list",children:[e.jsxs("p",{className:"content-count",children:["Total Events: ",_.length]}),0===_.length?e.jsxs("div",{className:"no-content",children:[e.jsx("p",{children:"No events created by artists found."}),e.jsx("p",{children:e.jsx("small",{children:"Only events created by artists (not admins) are shown here."})})]}):e.jsx("div",{className:"events-list",children:_.map(t=>e.jsx("div",{className:"event-card",children:e.jsxs("div",{className:"event-info",children:[e.jsx("h4",{children:t.title}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(t.date).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",t.location.venue,", ",t.location.city,", ",t.location.state]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price:"})," ",t.price?"$"+t.price:"Free"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",t.description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created:"})," ",new Date(t.createdAt).toLocaleDateString()]}),e.jsx("div",{className:"event-actions",children:e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this event?"))try{j(""),await b.deleteEvent(e),re()}catch(t){j("Error deleting event: "+t.message)}})(t.t),children:"Delete"})})]})},t.t))})]}),e.jsx("div",{className:"content-footer",style:{marginTop:"20px",textAlign:"center"},children:e.jsx("button",{className:"btn btn-secondary",onClick:()=>V(""),children:"Back to Content Management"})})]}):null:e.jsxs("div",{className:"content-management",children:[e.jsx("h2",{children:"Content Management"}),e.jsx("p",{children:"Select what you'd like to manage:"}),e.jsxs("div",{className:"content-actions",children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>V("artworks"),children:"Manage Artworks"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>V("events"),children:"Manage Events"})]})]});case"settings":return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Account Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your admin account preferences and settings."}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{className:"px-4 py-2 bg-[#E05264] text-white rounded-lg hover:bg-[#E05264]/90 transition-colors",children:"Coming Soon"})})]})});case"verification-admin":return e.jsx(S,{})}})()})]},c)})})]})})})]})},D=({onClose:t,onSubmit:a,error:n})=>{const[l,s]=r.useState({name:"",email:"",password:"",role:"Artist"}),[i,d]=r.useState(!1);return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Create New User"}),e.jsx("button",{className:"close-btn",onClick:t,children:"×"})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!i){d(!0);try{await a(l),s({name:"",email:"",password:"",role:"Artist"})}finally{d(!1)}}},className:"modal-body",children:[n&&e.jsx("div",{className:"error-message",children:n}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name:"}),e.jsx("input",{type:"text",value:l.name,onChange:e=>s(t=>({...t,name:e.target.value})),required:!0,disabled:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",value:l.email,onChange:e=>s(t=>({...t,email:e.target.value})),required:!0,disabled:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password:"}),e.jsx("input",{type:"password",value:l.password,onChange:e=>s(t=>({...t,password:e.target.value})),required:!0,minLength:"6",disabled:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Role:"}),e.jsxs("select",{value:l.role,onChange:e=>s(t=>({...t,role:e.target.value})),disabled:i,children:[e.jsx("option",{value:"Artist",children:"Artist"}),e.jsx("option",{value:"Admin",children:"Admin"})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:i,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:i,children:i?"Creating...":"Create User"})]})]})]})})},M=({user:t,onClose:a,onSubmit:n,error:l})=>{const[s,i]=r.useState(t.role),[d,c]=r.useState(!1);return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Change User Role"}),e.jsx("button",{className:"close-btn",onClick:a,children:"×"})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!d&&s!==t.role){c(!0);try{await n(s)}finally{c(!1)}}},className:"modal-body",children:[l&&e.jsx("div",{className:"error-message",children:l}),e.jsxs("p",{children:[e.jsx("strong",{children:"User:"})," ",t.name," (",t.email,")"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Current Role:"})," ",t.role]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"New Role:"}),e.jsxs("select",{value:s,onChange:e=>i(e.target.value),disabled:d,children:[e.jsx("option",{value:"Artist",children:"Artist"}),e.jsx("option",{value:"Admin",children:"Admin"})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:a,disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d||s===t.role,children:d?"Updating...":"Update Role"})]})]})]})})};export{R as default};
