import{j as e,m as t,A as a}from"./chunk-DVxuGNgR.js";import{r as l,u as r}from"./chunk-Bdcpd3Jy.js";import{j as i,f as o,k as n,l as s,u as d,m as c,n as m,o as h,p as u,c as x,q as f,r as g,s as p}from"./index-BxKwhLk7.js";import{y as b}from"./chunk-B7Q-YYjA.js";import{g as v,A as w,C as y,a as N}from"./chunk-c8HxWHmu.js";import{E as k}from"./chunk-DDOWB7ro.js";import{f as C,V as E,F}from"./chunk-BvRt1lsd.js";import{F as A}from"./chunk-CcL9Otje.js";import"./chunk-Boz1BxA5.js";import"./chunk-DsC01Si0.js";import"./chunk-BMgD4wMx.js";import"./chunk-CM-yfVV2.js";import"./chunk-C_i5cTs8.js";const D=[{name:"Teal",bg:"bg-teal-500",text:"text-white"},{name:"Coral",bg:"bg-coral-red",text:"text-white"},{name:"Purple",bg:"bg-purple-500",text:"text-white"},{name:"Blue",bg:"bg-blue-500",text:"text-white"},{name:"Green",bg:"bg-green-500",text:"text-white"},{name:"Pink",bg:"bg-pink-500",text:"text-white"},{name:"Orange",bg:"bg-orange-500",text:"text-white"},{name:"Indigo",bg:"bg-indigo-500",text:"text-white"}];function L({currentAvatar:t,userName:a,onAvatarChange:r,isEditing:i=!1}){const[o,n]=l.useState((null==t?void 0:t.startsWith("http"))||(null==t?void 0:t.startsWith("data:"))?"image":(null==t?void 0:t.startsWith("color:"))?"color":"initials"),[s,d]=l.useState((null==t?void 0:t.startsWith("color:"))?(()=>{const e=t.split(":");return e.length>1?e[1]:"bg-teal-500"})():"bg-teal-500"),[c,m]=l.useState("image"===o?t:null),[h,u]=l.useState(!1),x=l.useRef(),f=(null==a?void 0:a.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2))||"?",g=e=>{if(!e)return;if(!e.type.startsWith("image/"))return void b.error("Please select an image file");if(e.size>5242880)return void b.error("Image size should be less than 5MB");const t=new FileReader;t.onload=e=>{const t=e.target.result;m(t),n("image"),r&&r(t)},t.readAsDataURL(e)},p=()=>"image"===o&&c?e.jsx("img",{src:c,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg"}):"color"===o?e.jsx("div",{className:`w-32 h-32 rounded-full border-4 border-white shadow-lg flex items-center justify-center ${s} text-white`,children:e.jsx("span",{className:"text-3xl font-bold",children:f})}):e.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-white shadow-lg flex items-center justify-center bg-gray-200 text-gray-600",children:e.jsx("span",{className:"text-3xl font-bold",children:f})});return i?e.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[e.jsxs("div",{className:"relative",children:[p(),"image"===o&&e.jsx("button",{onClick:()=>{m(null),n("initials"),r&&r(""),x.current&&(x.current.value="")},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-600 transition-colors",children:"×"})]}),e.jsxs("div",{className:"flex space-x-4 bg-gray-50 rounded-lg p-2",children:[e.jsx("button",{onClick:()=>{n("initials"),m(null),d("bg-teal-500"),r&&r("")},className:"px-4 py-2 rounded-lg font-medium transition-colors "+("initials"===o?"bg-white text-teal-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:"Initials"}),e.jsx("button",{onClick:()=>n("color"),className:"px-4 py-2 rounded-lg font-medium transition-colors "+("color"===o?"bg-white text-teal-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:"Color"}),e.jsx("button",{onClick:()=>{var e;return null==(e=x.current)?void 0:e.click()},className:"px-4 py-2 rounded-lg font-medium transition-colors "+("image"===o?"bg-white text-teal-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:"Image"})]}),"color"===o&&e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Choose a color:"}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:D.map(t=>e.jsx("button",{onClick:()=>{return e=t.bg,d(e),n("color"),m(null),void(r&&r("color:"+e));var e},className:`w-12 h-12 rounded-full ${t.bg} border-4 transition-all duration-200 ${s===t.bg?"border-gray-800 scale-110":"border-white hover:scale-105"}`,title:t.name},t.name))})]}),"image"===o&&e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("input",{ref:x,type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];g(t)},className:"hidden"}),e.jsx("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors "+(h?"border-teal-500 bg-teal-50":"border-gray-300 hover:border-gray-400"),onDrop:e=>{e.preventDefault(),u(!1);const t=e.dataTransfer.files[0];g(t)},onDragOver:e=>{e.preventDefault(),u(!0)},onDragLeave:e=>{e.preventDefault(),u(!1)},children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mx-auto w-12 h-12 text-gray-400",children:e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>{var e;return null==(e=x.current)?void 0:e.click()},className:"text-teal-600 hover:text-teal-700 font-medium",children:"Click to upload"}),e.jsx("p",{className:"text-gray-500",children:" or drag and drop"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 5MB"})]})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 max-w-md",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"💡 Profile Picture Tips"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"• Use a high-quality, well-lit photo"}),e.jsx("li",{children:"• Square images work best"}),e.jsx("li",{children:"• Make sure your face is clearly visible"}),e.jsx("li",{children:"• Choose colors that reflect your artistic style"})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center",children:[p(),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Profile Picture"})]})}function j({userId:a}){const[r,o]=l.useState(null),[n,s]=l.useState(!0),[d,c]=l.useState(null);l.useEffect(()=>{m()},[]),l.useEffect(()=>{const e=()=>{m()};return window.addEventListener("artworkCreated",e),()=>{window.removeEventListener("artworkCreated",e)}},[]);const m=async()=>{try{s(!0);const e=await i.get("/api/users/activity");o(e.data.activity)}catch(e){try{const e=(await i.get("/api/users/stats")).data.stats;o({likedArtworks:[],bookmarkedArtworks:[],myArtworks:[],totalLikes:e.likesCount||0,totalBookmarks:e.bookmarksCount||0,totalArtworks:e.artworksCount||0})}catch(t){c("Failed to load recent activity")}}finally{s(!1)}};if(n)return e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#E05264]"}),e.jsx("span",{className:"ml-3 text-[#134856] font-lora",children:"Loading activity..."})]});if(d)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"⚠️"}),e.jsx("p",{className:"text-lg font-lora text-red-500",children:d})]});if(r&&(r.likedArtworks&&r.likedArtworks.length>0||r.bookmarkedArtworks&&r.bookmarkedArtworks.length>0||r.myArtworks&&r.myArtworks.length),!r)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🎨"}),e.jsx("p",{className:"text-xl font-lora font-semibold text-[#E05264] mb-2",children:"No recent activity yet"}),e.jsx("p",{className:"text-[#F48C8C] font-lora",children:"Start exploring artworks to build your activity feed!"})]});const h=({item:a,type:l,icon:r})=>e.jsxs(t.div,{className:"flex items-center space-x-4 p-4 bg-white/50 rounded-xl hover:bg-white/70 transition-all cursor-pointer",whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},children:[e.jsx("div",{className:"flex-shrink-0",children:a.imageUrl?e.jsx("img",{src:a.imageUrl,alt:a.title,className:"w-12 h-12 rounded-lg object-cover border-2 border-white shadow-sm"}):e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-[#1d7c6f] to-[#f58c8c] flex items-center justify-center text-white text-xl",children:"🎨"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-lg",children:r}),e.jsxs("p",{className:"text-sm font-semibold text-[#134856] font-lora",children:["liked"===l&&"Liked artwork","bookmarked"===l&&"Bookmarked artwork","created"===l&&"Created artwork"]})]}),e.jsx("p",{className:"text-base font-medium text-[#E05264] truncate font-dm-serif",children:a.title||"Untitled"}),e.jsxs("p",{className:"text-xs text-[#F48C8C] font-lora",children:[a.category&&a.category+" • ",new Date(a.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]})]}),u=[];r.likedArtworks&&r.likedArtworks.forEach(e=>{u.push({...e,activityType:"liked",icon:"❤️"})}),r.bookmarkedArtworks&&r.bookmarkedArtworks.forEach(e=>{u.push({...e,activityType:"bookmarked",icon:"🔖"})}),r.myArtworks&&r.myArtworks.forEach(e=>{u.push({...e,activityType:"created",icon:"🎨"})}),u.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt));const x=u.slice(0,10);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-3 bg-white/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-[#134856] font-dm-serif",children:r.totalLikes||0}),e.jsx("div",{className:"text-sm text-[#E05264] font-lora",children:"Likes"})]}),e.jsxs("div",{className:"text-center p-3 bg-white/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-[#134856] font-dm-serif",children:r.totalBookmarks||0}),e.jsx("div",{className:"text-sm text-[#E05264] font-lora",children:"Bookmarks"})]}),e.jsxs("div",{className:"text-center p-3 bg-white/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-[#134856] font-dm-serif",children:r.totalArtworks||0}),e.jsx("div",{className:"text-sm text-[#E05264] font-lora",children:"Artworks"})]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:x.length>0?x.map((a,l)=>e.jsx(t.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.05*l},children:e.jsx(h,{item:a,type:a.activityType,icon:a.icon})},`activity-${a.t||a.id}-${l}`)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-3",children:"🎨"}),e.jsx("p",{className:"text-lg font-lora font-semibold text-[#E05264] mb-2",children:"No recent activities to show"}),e.jsx("p",{className:"text-[#F48C8C] font-lora text-sm",children:r.totalLikes+r.totalBookmarks+r.totalArtworks>0?"Your detailed activity will appear here as you interact with artworks.":"Start exploring artworks to build your activity feed!"})]})}),u.length>10&&e.jsx("div",{className:"text-center pt-4",children:e.jsx("p",{className:"text-sm text-[#F48C8C] font-lora",children:"Showing latest 10 activities"})})]})}function P({profile:a,stats:r,onProfileUpdate:o}){var n,s,d,c,m,h;const[u,x]=l.useState(!1),[f,g]=l.useState({name:(null==a?void 0:a.name)||"",avatar:(null==a?void 0:a.avatar)||"",portfolioUrl:(null==a?void 0:a.portfolioUrl)||"",socialLinks:(null==a?void 0:a.socialLinks)||{instagram:"",twitter:"",website:""}}),[p,y]=l.useState(!1),[N,k]=l.useState(r);return l.useEffect(()=>{k(r)},[r]),l.useEffect(()=>{const e=v.on(w.BOOKMARKED,e=>{e.userId===(null==a?void 0:a.id)&&k(e=>({...e,bookmarksCount:((null==e?void 0:e.bookmarksCount)||0)+1}))}),t=v.on(w.UNBOOKMARKED,e=>{e.userId===(null==a?void 0:a.id)&&k(e=>({...e,bookmarksCount:Math.max(((null==e?void 0:e.bookmarksCount)||0)-1,0)}))}),l=v.on(w.CREATED,e=>{e.userId===(null==a?void 0:a.id)&&(null==o||o())});return()=>{e(),t(),l()}},[null==a?void 0:a.id,o]),e.jsxs("div",{className:"space-y-8",children:[e.jsxs(t.div,{className:"flex items-center justify-between",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsx("h2",{className:"text-4xl font-bold font-dm-serif bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:"Artist Profile"}),!u&&e.jsx(t.button,{onClick:()=>{x(!0),g({name:(null==a?void 0:a.name)||"",avatar:(null==a?void 0:a.avatar)||"",portfolioUrl:(null==a?void 0:a.portfolioUrl)||"",socialLinks:(null==a?void 0:a.socialLinks)||{instagram:"",twitter:"",website:""}})},className:"bg-gradient-to-r from-[#1d7c6f] to-[#f58c8c] text-white px-6 py-3 rounded-full font-semibold shadow-lg hover:shadow-xl transition-all duration-300 font-dm-serif",whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:"Edit Profile"})]}),e.jsxs(t.div,{className:"grid md:grid-cols-5 gap-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[e.jsxs("div",{className:"md:col-span-3 flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"text-center lg:text-left",children:e.jsx(L,{currentAvatar:f.avatar,userName:null==a?void 0:a.name,onAvatarChange:e=>g({...f,avatar:e}),isEditing:u})}),e.jsx("div",{className:"flex-1",children:u?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-1",children:"Name"}),e.jsx("input",{type:"text",value:f.name,onChange:e=>g({...f,name:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-1",children:"Portfolio URL"}),e.jsx("input",{type:"url",value:f.portfolioUrl,onChange:e=>g({...f,portfolioUrl:e.target.value}),placeholder:"https://your-portfolio.com",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora"})]})]}):e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl font-bold font-dm-serif mb-2 bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:null==a?void 0:a.name}),e.jsx("p",{className:"text-xl font-lora font-semibold text-[#E05264] mb-4",children:null==a?void 0:a.email}),(null==a?void 0:a.portfolioUrl)&&e.jsx("a",{href:a.portfolioUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-[#134856] hover:text-[#E05264] font-lora font-semibold mb-4 transition-colors",children:"🌐 Portfolio"}),e.jsxs("div",{className:"text-sm font-lora text-[#F48C8C]",children:[e.jsxs("p",{children:["Member since: ",new Date(null==a?void 0:a.createdAt).toLocaleDateString()]}),e.jsxs("p",{children:["Last updated: ",new Date(null==a?void 0:a.updatedAt).toLocaleDateString()]})]})]})})]}),e.jsx("div",{className:"md:col-span-2",children:u?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-bold font-dm-serif text-[#134856] mb-3",children:"Social Links"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-1",children:"Instagram"}),e.jsx("input",{type:"url",value:f.socialLinks.instagram,onChange:e=>g({...f,socialLinks:{...f.socialLinks,instagram:e.target.value}}),placeholder:"https://instagram.com/username",className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-1",children:"Twitter"}),e.jsx("input",{type:"url",value:f.socialLinks.twitter,onChange:e=>g({...f,socialLinks:{...f.socialLinks,twitter:e.target.value}}),placeholder:"https://twitter.com/username",className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-1",children:"Website"}),e.jsx("input",{type:"url",value:f.socialLinks.website,onChange:e=>g({...f,socialLinks:{...f.socialLinks,website:e.target.value}}),placeholder:"https://your-website.com",className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora text-sm"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx(t.button,{onClick:async()=>{var e,t;y(!0);try{await i.put("/api/users/profile",f),b.success("Profile updated successfully!"),x(!1),o()}catch(a){b.error((null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.message)||"Failed to update profile")}finally{y(!1)}},disabled:p,className:"bg-gradient-to-r from-[#1d7c6f] to-[#f58c8c] text-white px-6 py-3 rounded-full font-semibold shadow-lg hover:shadow-xl transition-all duration-300 font-dm-serif disabled:opacity-50 flex-1",whileHover:{scale:p?1:1.05,y:p?0:-2},whileTap:{scale:p?1:.95},children:p?"Saving...":"Save"}),e.jsx(t.button,{onClick:()=>{x(!1),g({name:(null==a?void 0:a.name)||"",avatar:(null==a?void 0:a.avatar)||"",portfolioUrl:(null==a?void 0:a.portfolioUrl)||"",socialLinks:(null==a?void 0:a.socialLinks)||{instagram:"",twitter:"",website:""}})},className:"bg-white text-[#134856] border border-gray-300 px-6 py-3 rounded-full font-semibold hover:bg-gray-50 transition-all duration-300 font-dm-serif flex-1",whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:"Cancel"})]})]}):e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold font-dm-serif text-[#134856] mb-3",children:"Connect"}),e.jsxs("div",{className:"space-y-2",children:[(null==(n=null==a?void 0:a.socialLinks)?void 0:n.instagram)&&e.jsx("a",{href:a.socialLinks.instagram,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-[#134856] hover:text-[#E05264] font-lora transition-colors",children:"📷 Instagram"}),(null==(s=null==a?void 0:a.socialLinks)?void 0:s.twitter)&&e.jsx("a",{href:a.socialLinks.twitter,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-[#134856] hover:text-[#E05264] font-lora transition-colors",children:"🐦 Twitter"}),(null==(d=null==a?void 0:a.socialLinks)?void 0:d.website)&&e.jsx("a",{href:a.socialLinks.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-[#134856] hover:text-[#E05264] font-lora transition-colors",children:"🌍 Website"}),!(null==(c=null==a?void 0:a.socialLinks)?void 0:c.instagram)&&!(null==(m=null==a?void 0:a.socialLinks)?void 0:m.twitter)&&!(null==(h=null==a?void 0:a.socialLinks)?void 0:h.website)&&e.jsx("p",{className:"text-[#F48C8C] font-lora text-sm",children:"No social links added yet"})]})]})})]}),e.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[e.jsx("h3",{className:"text-2xl font-bold font-dm-serif mb-6 bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:"Artist Statistics"}),e.jsx("div",{className:"h-px bg-gradient-to-r from-[#134856]/30 via-[#e05264]/30 to-[#134856]/30 mb-8"}),e.jsx(t.div,{className:"rounded-3xl p-8 bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] shadow-[0_0_30px_rgba(244,140,140,0.3)] text-white",whileHover:{scale:1.01},transition:{duration:.3},children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 text-center font-lora",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:(null==N?void 0:N.likesCount)||0}),e.jsx("div",{className:"text-sm font-medium",children:"Likes Given"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:(null==N?void 0:N.bookmarksCount)||0}),e.jsx("div",{className:"text-sm font-medium",children:"Bookmarks"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:(null==r?void 0:r.followsCount)||0}),e.jsx("div",{className:"text-sm font-medium",children:"Following"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:(null==r?void 0:r.followersCount)||0}),e.jsx("div",{className:"text-sm font-medium",children:"Followers"})]})]})})]}),e.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:[e.jsx("h3",{className:"text-2xl font-bold font-dm-serif mb-6 bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:"Recent Activity"}),e.jsx("div",{className:"h-px bg-gradient-to-r from-[#134856]/30 via-[#e05264]/30 to-[#134856]/30 mb-8"}),e.jsx("div",{className:"bg-gray-50/80 border-2 border-[#e05264]/20 shadow-[0_0_20px_rgba(224,82,100,0.2)] rounded-2xl p-6",children:e.jsx(j,{userId:null==a?void 0:a.id})})]})]})}function T({user:a,onLogout:r}){const[o,n]=l.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[s,d]=l.useState({password:"",confirmText:""}),[c,m]=l.useState(!1),[h,u]=l.useState(!1);return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsx(t.div,{className:"bg-gradient-to-br from-[#1d7c6f] to-[#f58c8c] rounded-3xl shadow-2xl p-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs("div",{className:"bg-[#F8E6DA] rounded-2xl p-8",children:[e.jsx("h2",{className:"text-3xl font-bold font-dm-serif mb-6 bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:"Change Password"}),e.jsxs("form",{onSubmit:async e=>{var t,a;if(e.preventDefault(),o.newPassword===o.confirmPassword)if(6>o.newPassword.length)b.error("New password must be at least 6 characters");else{u(!0);try{await i.put("/api/users/change-password",{currentPassword:o.currentPassword,newPassword:o.newPassword}),b.success("Password changed successfully!"),n({currentPassword:"",newPassword:"",confirmPassword:""})}catch(l){b.error((null==(a=null==(t=l.response)?void 0:t.data)?void 0:a.message)||"Failed to change password")}finally{u(!1)}}else b.error("New passwords do not match")},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-2",children:"Current Password"}),e.jsx("input",{type:"password",required:!0,value:o.currentPassword,onChange:e=>n({...o,currentPassword:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-2",children:"New Password"}),e.jsx("input",{type:"password",required:!0,minLength:"6",value:o.newPassword,onChange:e=>n({...o,newPassword:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-2",children:"Confirm New Password"}),e.jsx("input",{type:"password",required:!0,minLength:"6",value:o.confirmPassword,onChange:e=>n({...o,confirmPassword:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora"})]}),e.jsx(t.button,{type:"submit",disabled:h,className:"bg-gradient-to-r from-[#1d7c6f] to-[#f58c8c] text-white px-6 py-3 rounded-full font-semibold shadow-lg hover:shadow-xl transition-all duration-300 font-dm-serif disabled:opacity-50",whileHover:{scale:h?1:1.05,y:h?0:-2},whileTap:{scale:h?1:.95},children:h?"Changing Password...":"Change Password"})]})]})}),e.jsx(t.div,{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-3xl shadow-2xl p-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:e.jsxs("div",{className:"bg-[#F8E6DA] rounded-2xl p-8 border-l-4 border-red-500",children:[e.jsx("h2",{className:"text-3xl font-bold font-dm-serif text-red-600 mb-2",children:"⚠️ Danger Zone"}),e.jsx("p",{className:"text-[#E05264] font-lora mb-6",children:"Once you delete your account, there is no going back. Please be certain."}),c?e.jsxs("div",{className:"bg-red-50 rounded-2xl p-6 border border-red-200",children:[e.jsx("h3",{className:"text-xl font-bold font-dm-serif text-red-800 mb-4",children:"🚨 Oh no! You're in dangerous territory!"}),e.jsx("p",{className:"text-red-700 font-lora mb-4",children:"This action cannot be undone. This will permanently delete your account, all your artworks, likes, and followers. Are you absolutely sure?"}),e.jsxs("form",{onSubmit:async e=>{var t,a;if(e.preventDefault(),"DELETE MY ACCOUNT"===s.confirmText){u(!0);try{await i.delete("/api/users/delete-account",{data:{password:s.password}}),b.success("Account deleted successfully"),r()}catch(l){b.error((null==(a=null==(t=l.response)?void 0:t.data)?void 0:a.message)||"Failed to delete account")}finally{u(!1)}}else b.error('Please type "DELETE MY ACCOUNT" to confirm')},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-red-700 mb-2",children:"Enter your password to confirm:"}),e.jsx("input",{type:"password",required:!0,value:s.password,onChange:e=>d({...s,password:e.target.value}),className:"w-full px-4 py-3 border border-red-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent font-lora"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-red-700 mb-2",children:'Type "DELETE MY ACCOUNT" to confirm:'}),e.jsx("input",{type:"text",required:!0,value:s.confirmText,onChange:e=>d({...s,confirmText:e.target.value}),placeholder:"DELETE MY ACCOUNT",className:"w-full px-4 py-3 border border-red-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent font-lora"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(t.button,{type:"submit",disabled:h,className:"bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-3 rounded-full font-semibold shadow-lg hover:shadow-xl transition-all duration-300 font-dm-serif disabled:opacity-50",whileHover:{scale:h?1:1.05,y:h?0:-2},whileTap:{scale:h?1:.95},children:h?"Deleting Account...":"Yes, Delete My Account"}),e.jsx(t.button,{type:"button",onClick:()=>{m(!1),d({password:"",confirmText:""})},className:"bg-white text-[#134856] border border-gray-300 px-6 py-3 rounded-full font-semibold hover:bg-gray-50 transition-all duration-300 font-dm-serif",whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:"Cancel"})]})]})]}):e.jsx(t.button,{onClick:()=>m(!0),className:"bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-3 rounded-full font-semibold shadow-lg hover:shadow-xl transition-all duration-300 font-dm-serif",whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:"Delete My Account"})]})}),e.jsx(t.div,{className:"bg-gradient-to-br from-[#1d7c6f] to-[#f58c8c] rounded-3xl shadow-2xl p-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:e.jsxs("div",{className:"bg-[#F8E6DA] rounded-2xl p-8",children:[e.jsx("h2",{className:"text-3xl font-bold font-dm-serif mb-6 bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:"Account Information"}),e.jsxs("div",{className:"space-y-4 font-lora",children:[e.jsxs("div",{className:"text-[#134856]",children:[e.jsx("strong",{children:"Name:"})," ",e.jsx("span",{className:"text-[#E05264]",children:null==a?void 0:a.name})]}),e.jsxs("div",{className:"text-[#134856]",children:[e.jsx("strong",{children:"Email:"})," ",e.jsx("span",{className:"text-[#E05264]",children:null==a?void 0:a.email})]}),e.jsxs("div",{className:"text-[#134856]",children:[e.jsx("strong",{children:"Account Status:"}),e.jsx("span",{className:"ml-2 px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold",children:"Active"})]}),e.jsxs("div",{className:"text-[#134856]",children:[e.jsx("strong",{children:"Member Since:"})," ",e.jsx("span",{className:"text-[#E05264]",children:new Date((null==a?void 0:a.createdAt)||Date.now()).toLocaleDateString()})]})]})]})})]})}function M({userId:a}){const[r,i]=l.useState([]),[n,s]=l.useState(!0),[d,c]=l.useState("all"),[m,h]=l.useState(!1),[u,x]=l.useState(null);l.useEffect(()=>{f()},[a]),l.useEffect(()=>{const e=v.on(w.CREATED,e=>{e.userId===a&&f()}),t=v.on(w.UPDATED,e=>{e.userId===a&&f()}),l=v.on(w.DELETED,e=>{e.userId===a&&f()}),r=e=>{"artworkCreated"===e.key&&(f(),localStorage.removeItem("artworkCreated"))},i=()=>{f()};return window.addEventListener("storage",r),window.addEventListener("artworkCreated",i),()=>{e(),t(),l(),window.removeEventListener("storage",r),window.removeEventListener("artworkCreated",i)}},[a]);const f=async()=>{try{const e=await o.getCurrentUser();if(!e||!e.user)throw Error("Failed to get current user");const t=e.user.id,a=await o.getArtworks({userId:t,limit:50}),l=(null==a?void 0:a.data)||a||[];i(Array.isArray(l)?l:[])}catch(e){b.error("Failed to load artworks"),i([])}finally{s(!1)}},g=()=>{x(null),h(!0)},p=r.filter(e=>"all"===d||("published"===d?e.isPublic&&e.isActive:"draft"!==d||!e.isPublic||!e.isActive));return n?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"text-xl font-serif text-transparent bg-gradient-to-r from-[#E05264] to-[#134856] bg-clip-text",children:"Loading your artworks..."})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-serif font-bold text-transparent bg-gradient-to-r from-[#E05264] to-[#134856] bg-clip-text mb-2",children:"My Artworks"}),e.jsxs("p",{className:"text-gray-600 font-serif",children:[r.length," total artworks"]})]}),e.jsx("button",{onClick:g,className:"px-6 py-3 bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white rounded-full hover:shadow-lg transition-all duration-300 font-serif font-medium",children:"+ Add New Artwork"})]}),e.jsx("div",{className:"flex space-x-4 mb-8",children:[{id:"all",label:"All",count:r.length},{id:"published",label:"Published",count:r.filter(e=>e.isPublic&&e.isActive).length},{id:"draft",label:"Drafts",count:r.filter(e=>!e.isPublic||!e.isActive).length}].map(a=>e.jsxs(t.button,{onClick:()=>c(a.id),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-6 py-3 rounded-full font-serif font-medium transition-all duration-300 "+(d===a.id?"bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white shadow-lg":"bg-white/70 backdrop-blur-sm text-gray-700 hover:bg-white/90 border border-gray-200/50 hover:shadow-md"),children:[a.label," (",a.count,")"]},a.id))}),0===p.length?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🎨"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No artworks yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Start sharing your artistic creations with the community!"}),e.jsx("button",{onClick:g,className:"px-6 py-3 bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white rounded-lg hover:shadow-lg transition-all duration-300",children:"Create Your First Artwork"})]}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(t=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.imageUrl||t.image,alt:t.title,className:"w-full h-48 object-cover"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(t.isPublic&&t.isActive?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:t.isPublic&&t.isActive?"✓ Published":"📝 Draft"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.title}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600 transition-colors",children:"⋯"})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:t.category||t.artform}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx("span",{className:"text-red-500 mr-1",children:"❤️"}),e.jsxs("span",{className:"text-sm",children:[t.likes&&t.likes.length||0," likes"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>(e=>{x(e),h(!0)})(t),className:"px-3 py-1 text-sm text-white bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] hover:shadow-lg rounded transition-all duration-300",children:"Edit"}),e.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this artwork?"))try{await o.deleteArtwork(e),i(t=>t.filter(t=>t.t!==e)),b.success("Artwork deleted successfully")}catch{b.error("Failed to delete artwork")}})(t.t),className:"px-3 py-1 text-sm text-white bg-gradient-to-r from-red-500 to-red-600 hover:shadow-lg rounded transition-all duration-300",children:"Delete"})]})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-3",children:["Created ",t.createdAt?new Date(t.createdAt).toLocaleDateString():"N/A"]})]})]},t.t))}),e.jsxs("div",{className:"mt-12 rounded-2xl p-8 bg-gradient-to-br from-[#1D7C6F] to-[#F48C8C] text-white font-lora grid grid-cols-2 md:grid-cols-4 gap-6 shadow-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:r.length}),e.jsx("div",{children:"Total Artworks"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:r.filter(e=>e.isPublic&&e.isActive).length}),e.jsx("div",{children:"Published"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:r.reduce((e,t)=>{var a;return e+((null==(a=t.likes)?void 0:a.length)||0)},0)}),e.jsx("div",{children:"Total Likes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:r.length>0?Math.round(r.reduce((e,t)=>{var a;return e+((null==(a=t.likes)?void 0:a.length)||0)},0)/r.length):0}),e.jsx("div",{children:"Avg. Likes"})]})]}),e.jsx(y,{isOpen:m,onClose:()=>{h(!1),x(null)},onSubmit:async e=>{try{if(u){const t=await o.updateArtwork(u.t||u.id,e),a=t.data||t;i(e=>e.map(e=>(e.t||e.id)===(u.t||u.id)?a:e)),b.success("Your artwork has been updated successfully!")}else{const t=await o.createArtwork(e),a=t.data||t;i([a,...r]),b.success("Your artwork has been added successfully!")}h(!1),x(null)}catch{b.error(u?"Failed to update artwork":"Failed to create artwork")}},editingArtwork:u})]})}function I({userId:r}){const[i,n]=l.useState([]),[s,d]=l.useState(!0),[c,m]=l.useState("all"),[h,u]=l.useState(!1),[x,f]=l.useState(null),[g,p]=l.useState({show:!1,eventId:null,eventTitle:""});l.useEffect(()=>{v()},[r]);const v=async()=>{try{const e=await o.getCurrentUser();if(!e||!e.user)throw Error("Failed to get current user");const t=e.user.id,a=await o.getEvents({organizer:t}),l=(null==a?void 0:a.data)||a||[],r=Array.isArray(l)?l.filter(e=>e.organizer===t||e.organizerId===t||e.createdBy&&e.createdBy===t):[];n(r)}catch(e){b.error("Failed to load events"),n([])}finally{d(!1)}},w=()=>{u(!1),f(null)},y=i.filter(e=>{if("all"===c)return!0;const t=new Date(e.date),a=new Date;return"upcoming"===c?t>=a:"past"!==c||a>t}),N=i.filter(e=>new Date(e.date)>=new Date),C=i.filter(e=>new Date(e.date)<new Date);return s?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"text-xl text-teal-600",children:"Loading your events..."})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-teal-800",children:"My Events"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[i.length," total events"]})]}),e.jsxs("button",{onClick:()=>u(!0),className:"px-6 py-3 bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white rounded-full hover:shadow-lg transition-all duration-300 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Event"]})]}),e.jsx("div",{className:"flex space-x-4 mb-8",children:[{id:"all",label:"All",count:i.length},{id:"upcoming",label:"Upcoming",count:N.length},{id:"past",label:"Past",count:C.length}].map(t=>e.jsxs("button",{onClick:()=>m(t.id),className:"px-4 py-2 rounded-lg font-medium transition-colors "+(c===t.id?"bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"),children:[t.label," (",t.count,")"]},t.id))}),0===y.length?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📅"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No events yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Start organizing events to engage with the traditional arts community!"}),e.jsx("button",{onClick:()=>u(!0),className:"px-6 py-3 bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white rounded-full hover:shadow-lg transition-all duration-300",children:"Create Your First Event"})]}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(t=>{var a,l;const r=new Date(t.date),i=r>=new Date;return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"relative",children:[t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-48 object-cover"}):e.jsx("div",{className:"w-full h-48 bg-gradient-to-br from-teal-100 to-blue-100 flex items-center justify-center",children:e.jsx("div",{className:"text-6xl text-teal-400",children:"🎭"})}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(i?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:i?"📅 Upcoming":"🕐 Past"})}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:"bg-white bg-opacity-90 px-2 py-1 rounded-full text-xs font-medium text-gray-700",children:t.type?t.type.charAt(0).toUpperCase()+t.type.slice(1):"Event"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2",children:t.title})}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:t.description}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-500 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsxs("span",{children:[r.toLocaleDateString()," at ",t.time||"TBD"]})]}),t.location&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsxs("span",{className:"truncate",children:[(null==(a=t.location)?void 0:a.venue)||"TBD",", ",(null==(l=t.location)?void 0:l.city)||"TBD"]})]}),t.price>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),e.jsxs("span",{children:["₹",t.price]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["Created ",new Date(t.createdAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>(e=>{f(e)})(t),className:"px-3 py-1 text-sm text-white bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] hover:shadow-lg rounded-full transition-all duration-300",children:"Edit"}),e.jsx("button",{onClick:()=>(e=>{p({show:!0,eventId:e.id,eventTitle:e.title})})(t),className:"px-3 py-1 text-sm text-white bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] hover:shadow-lg rounded-full transition-all duration-300",children:"Delete"})]})]})]})]},t.id)})}),e.jsxs("div",{className:"mt-12 rounded-2xl p-8 bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white font-lora grid grid-cols-2 md:grid-cols-4 gap-6 shadow-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:i.length}),e.jsx("div",{children:"Total Events"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:N.length}),e.jsx("div",{children:"Upcoming"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:C.length}),e.jsx("div",{children:"Completed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:i.filter(e=>!0===e.registrationRequired).length}),e.jsx("div",{children:"With Registration"})]})]}),e.jsx(k,{isOpen:h,onClose:w,onSubmit:async e=>{try{const t={id:Date.now(),...e,createdAt:(new Date).toISOString(),organizer:r};n(e=>[t,...e]),b.success("Event created successfully!"),u(!1)}catch(t){b.error("Failed to create event")}}}),x&&e.jsx(k,{isOpen:!!x,onClose:w,onSubmit:async e=>{try{const t={...x,...e,updatedAt:(new Date).toISOString()};n(e=>e.map(e=>e.id===x.id?t:e)),b.success("Event updated successfully!"),f(null)}catch(t){b.error("Failed to update event")}},event:x,isEditing:!0}),e.jsx(a,{children:g.show&&e.jsx(t.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(t.div,{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:50},transition:{duration:.3},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Delete Event"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to delete "',e.jsx("span",{className:"font-medium text-gray-900",children:g.eventTitle}),'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{p({show:!1,eventId:null,eventTitle:""})},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:async()=>{try{await o.deleteEvent(g.eventId),n(e=>e.filter(e=>e.id!==g.eventId)),b.success("Event deleted successfully")}catch(e){b.error("Failed to delete event")}finally{p({show:!1,eventId:null,eventTitle:""})}},className:"flex-1 bg-gradient-to-r from-red-500 to-red-600 text-white px-4 py-2 rounded-lg font-semibold hover:from-red-600 hover:to-red-700 transition-all duration-300",children:"Delete Event"})]})]})})})})]})}const B=({userId:a})=>{const[r,i]=l.useState([]),[d,c]=l.useState([]),[m,h]=l.useState(!0),[u,x]=l.useState("liked");l.useEffect(()=>{f()},[a]);const f=async()=>{try{h(!0);const e=await o.getCurrentUser();if(!e||!e.user)throw Error("Failed to get current user");const t=e.user,a=t.likes||[],l=t.bookmarks||[];if(0===a.length&&0===l.length)return i([]),void c([]);const r=await o.getArtworks({limit:200}),n=(null==r?void 0:r.data)||r||[];if(Array.isArray(n)){const e=n.map(e=>({id:e.t||e.id,title:e.title||e.name,description:e.description,artist:e.artist||"Cultural Heritage",imageUrl:e.imageUrl||e.image,category:e.category||"Traditional Art",likes:e.likes||0,bookmarks:e.bookmarks||0,views:e.views||0,createdAt:e.createdAt||(new Date).toISOString(),userId:e.userId||e.artistId,origin:e.origin})),t=e.filter(e=>{const t=e.id.toString();return a.some(e=>e.toString()===t)}),r=e.filter(e=>{const t=e.id.toString();return l.some(e=>e.toString()===t)});i(t),c(r)}else i([]),c([])}catch(e){b.error("Failed to load your artworks"),i([]),c([])}finally{h(!1)}},g=async e=>{try{await o.toggleLike(e),i(t=>t.filter(t=>t.id!==e)),b.success("Artwork unliked")}catch(t){b.error("Failed to update like")}},p=async e=>{try{await o.toggleBookmark(e),c(t=>t.filter(t=>t.id!==e)),b.success("Bookmark removed")}catch(t){b.error("Failed to update bookmark")}},v="liked"===u?r:d;return m?e.jsx("div",{className:"flex justify-center items-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#E05264]"})}):e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("div",{className:"bg-white rounded-full p-1 shadow-lg border border-gray-200",children:[e.jsxs("button",{onClick:()=>x("liked"),className:`px-6 py-3 rounded-full font-semibold text-sm transition-all duration-300 flex items-center gap-2 ${"liked"===u?"bg-gradient-to-r from-[#1d7c6f] to-[#f58c8c] text-white shadow-lg":"text-[#134856] hover:bg-gray-50"} font-dm-serif`,children:[e.jsx(n,{className:"text-red-500"}),"Liked Artworks (",r.length,")"]}),e.jsxs("button",{onClick:()=>x("bookmarked"),className:`px-6 py-3 rounded-full font-semibold text-sm transition-all duration-300 flex items-center gap-2 ${"bookmarked"===u?"bg-gradient-to-r from-[#1d7c6f] to-[#f58c8c] text-white shadow-lg":"text-[#134856] hover:bg-gray-50"} font-dm-serif`,children:[e.jsx(s,{className:"text-amber-600"}),"Bookmarked (",d.length,")"]})]})}),0===v.length?e.jsxs(t.div,{className:"text-center py-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsx("div",{className:"text-6xl mb-4",children:"liked"===u?"❤️":"🔖"}),e.jsxs("h3",{className:"text-2xl font-semibold font-dm-serif mb-2 bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:["No ","liked"===u?"Liked":"Bookmarked"," Artworks"]}),e.jsxs("p",{className:"text-[#E05264] font-lora mb-4",children:["You haven't ","liked"===u?"liked":"bookmarked"," any artworks yet."]}),e.jsxs("p",{className:"text-gray-500 font-lora",children:["Visit the Art Wall to discover and ","liked"===u?"like":"bookmark"," amazing artworks!"]})]}):e.jsx(t.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},children:v.map((t,a)=>e.jsx(N,{artwork:t,index:a,currentUser:{likes:r.map(e=>e.id)},isBookmarked:"bookmarked"===u||d.some(e=>e.id===t.id),onLike:g,onBookmark:p,onImageClick:()=>{}},t.id))})]})},z=({showFollowing:a=!0,showFollowers:r=!0,compact:i=!1})=>{const[o,s]=l.useState([]),[h,u]=l.useState([]),[x,f]=l.useState(!0),[g,p]=l.useState("following"),{isAuthenticated:b}=d();l.useEffect(()=>{b&&v()},[b]);const v=async()=>{try{f(!0);const e=[];a&&e.push(C.getFollowing()),r&&e.push(C.getFollowers());const t=await Promise.all(e);let l=0;if(a){const e=t[l];e.success&&s(e.following||[]),l++}if(r){const e=t[l];e.success&&u(e.followers||[])}}catch(e){}finally{f(!1)}},w=({user:a,showFollowButton:l=!0})=>e.jsx(t.div,{className:`\n        bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden\n        ${i?"p-3":"p-4"}\n      `,whileHover:{y:-2},initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"relative",children:e.jsx("img",{src:a.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(a.name)}&background=134856&color=fff`,alt:a.name,className:"rounded-full object-cover "+(i?"w-10 h-10":"w-12 h-12")})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate "+(i?"text-sm":"text-base"),children:a.name}),e.jsx(E,{isVerified:a.isVerified,size:"xs"})]}),a.specialization&&e.jsx("p",{className:"text-gray-600 truncate "+(i?"text-xs":"text-sm"),children:a.specialization}),a.location&&e.jsxs("p",{className:"text-gray-500 truncate "+(i?"text-xs":"text-sm"),children:["📍 ",a.location]})]}),l&&e.jsx(F,{userId:a.t,className:i?"px-3 py-1 text-xs":"px-4 py-2 text-sm"})]})});return b?x?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading following data..."})]}):e.jsxs("div",{className:"space-y-6 "+(i?"":"max-w-4xl mx-auto"),children:[a&&r&&e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>p("following"),className:`\n              flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-md transition-all duration-200\n              ${"following"===g?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}\n            `,children:[e.jsx(m,{size:16}),e.jsxs("span",{children:["Following (",o.length,")"]})]}),e.jsxs("button",{onClick:()=>p("followers"),className:`\n              flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-md transition-all duration-200\n              ${"followers"===g?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}\n            `,children:[e.jsx(n,{size:16}),e.jsxs("span",{children:["Followers (",h.length,")"]})]})]}),("following"===g||!r)&&a&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(m,{className:"text-blue-600"}),"Following (",o.length,")"]}),0===o.length?e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[e.jsx(m,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-600 mb-2",children:"You're not following anyone yet"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Discover artists and start following to see their latest works!"})]}):e.jsx("div",{className:"grid gap-4 "+(i?"grid-cols-1":"grid-cols-1 md:grid-cols-2"),children:o.map(t=>e.jsx(w,{user:t,showFollowButton:!1},t.t))})]}),("followers"===g||!a)&&r&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(n,{className:"text-red-500"}),"Followers (",h.length,")"]}),0===h.length?e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[e.jsx(n,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-600 mb-2",children:"No followers yet"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Share amazing artworks to attract followers!"})]}):e.jsx("div",{className:"grid gap-4 "+(i?"grid-cols-1":"grid-cols-1 md:grid-cols-2"),children:h.map(t=>e.jsx(w,{user:t,showFollowButton:!0},t.t))})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(c,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"Please log in to see your following lists."})]})};function S(){var o;const{user:s,logout:c}=d(),[v,w]=l.useState("profile"),[y,N]=l.useState(null),[k,C]=l.useState(null),[E,F]=l.useState(!1),D=r();l.useEffect(()=>{s?L():D("/login")},[s,D]);const L=async()=>{try{F(!0);const[e,t]=await Promise.all([i.get("/api/users/profile"),i.get("/api/users/stats")]);N(e.data.user),C(t.data.stats)}catch(e){b.error("Failed to load user data"),N({name:null==s?void 0:s.name,avatar:null}),C({totalArtworks:0,totalLikes:0,totalViews:0,likesCount:0,bookmarksCount:0,followsCount:0,followersCount:0,artworksCount:0})}finally{F(!1)}},j=async()=>{await c(),b.success("Logged out successfully"),D("/login")},S=()=>{const a=Array.from({length:20},(e,t)=>({id:t,size:4*Math.random()+2,color:["rgba(19, 72, 86, 0.6)","rgba(224, 82, 100, 0.6)","rgba(244, 140, 140, 0.6)","rgba(29, 124, 111, 0.6)","rgba(255, 215, 0, 0.6)"][Math.floor(5*Math.random())],initialX:100*Math.random(),initialY:100*Math.random(),animationDelay:5*Math.random(),animationDuration:8+6*Math.random()}));return e.jsx("div",{className:"fixed inset-0 pointer-events-none z-0",children:a.map(a=>e.jsx(t.div,{className:"absolute rounded-full opacity-40",style:{width:a.size+"px",height:a.size+"px",backgroundColor:a.color,left:a.initialX+"%",top:a.initialY+"%",filter:"blur(0.5px)",boxShadow:`0 0 ${2*a.size}px ${a.color}`},animate:{y:[0,-80,0],x:[0,25,-25,0],opacity:[.4,.7,.4],scale:[1,1.3,1]},transition:{duration:a.animationDuration,repeat:1/0,delay:a.animationDelay,ease:"easeInOut"}},a.id))})},[U,H]=l.useState(!1),Y=[{id:"profile",label:"Profile",icon:u},{id:"artworks",label:"My Artworks",icon:x},{id:"events",label:"My Events",icon:f},{id:"likes",label:"Liked Posts",icon:n},{id:"following",label:"Following & Followers",icon:m}],$=[{id:"settings",label:"Settings",icon:g},{id:"logout",label:"Logout",icon:p,isAction:!0}];if(E)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#F48C8C]/10 via-white to-[#134856]/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-[#E05264] mx-auto mb-4"}),e.jsx("p",{className:"text-2xl font-dm-serif text-transparent bg-clip-text bg-gradient-to-r from-[#E05264] to-[#134856]",children:"Loading your dashboard..."})]})});const O=e=>{"logout"===e?j():w(e),H(!1)};return e.jsxs("div",{className:"min-h-screen bg-blush-peach",children:[e.jsx(S,{}),e.jsx(A,{}),e.jsx("button",{onClick:()=>H(!U),className:"md:hidden fixed top-4 left-4 z-50 p-3 bg-white rounded-2xl shadow-lg text-[#134856] hover:text-[#E05264] transition-all duration-200",children:e.jsx(h,{className:"w-5 h-5"})}),U&&e.jsx("div",{className:"fixed inset-0 z-30 bg-gray-600 bg-opacity-50 md:hidden",onClick:()=>H(!1)}),e.jsx("div",{className:"px-10 mt-10 mx-auto pb-10",children:e.jsx("div",{className:"rounded-3xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"flex",children:[e.jsx("aside",{className:(U?"translate-x-0":"-translate-x-full")+" fixed inset-y-0 left-0 z-40 w-80 transform transition-transform duration-300 ease-in-out md:translate-x-0 md:static md:w-80 md:flex-shrink-0 bg-gradient-to-b from-[#134856] to-[#E05264]",children:e.jsxs("div",{className:"h-full px-6 py-8 overflow-y-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-3xl font-bold font-dm-serif text-white",children:"Dashboard"}),e.jsx("p",{className:"text-white text-sm mt-1 font-lora",children:"Navigate your workspace"}),e.jsx("div",{className:"mt-4 h-px bg-white/20"}),e.jsxs("div",{className:"mt-4 flex items-center space-x-3",children:[e.jsx("img",{src:(null==y?void 0:y.avatar)||"/default-avatar.png",alt:null==s?void 0:s.name,className:"w-12 h-12 rounded-full border-2 border-white shadow-sm"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate font-dm-serif",children:null==s?void 0:s.name}),e.jsx("p",{className:"text-xs text-white/70 truncate font-lora",children:"Artist Account"})]})]}),e.jsx("div",{className:"mt-4 h-px bg-white/20"})]}),e.jsxs("nav",{className:"space-y-2",children:[Y.map(t=>{const a=t.icon,l=v===t.id;return e.jsxs("button",{onClick:()=>O(t.id),className:"w-full flex items-center px-4 py-3 text-left rounded-2xl transition-all duration-200 font-lora "+(l?"bg-gradient-to-r from-[#E05264] to-[#E05264]/90 text-white shadow-md transform scale-[1.02]":"text-white hover:bg-white/10 hover:shadow-sm"),children:[e.jsx(a,{className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-medium",children:t.label})]},t.id)}),e.jsx("div",{className:"mt-6 mb-4 h-px bg-white/20"}),$.map(t=>{const a=t.icon,l=v===t.id,r="logout"===t.id;return e.jsxs("button",{onClick:()=>O(t.id),className:"w-full flex items-center px-4 py-3 text-left rounded-2xl transition-all duration-200 font-lora "+(r?"text-white hover:bg-red-500/20 hover:text-red-200":l?"bg-gradient-to-r from-[#E05264] to-[#E05264]/90 text-white shadow-md transform scale-[1.02]":"text-white hover:bg-white/10 hover:shadow-sm"),children:[e.jsx(a,{className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-medium",children:t.label})]},t.id)})]})]})}),e.jsx("div",{className:"hidden md:block w-px bg-gray-200"}),e.jsx("main",{className:"flex-1 flex flex-col min-w-0 bg-white",children:e.jsx(a,{mode:"wait",children:e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"bg-gradient-to-r from-[#134856] to-[#E05264] px-8 py-6 border-b border-gray-100",children:[e.jsx("h2",{className:"text-4xl font-bold text-white capitalize font-dm-serif",children:null==(o=[...Y,...$].find(e=>e.id===v&&!e.isAction))?void 0:o.label}),e.jsxs("p",{className:"text-white text-2xl text-sm mt-1 font-lora",children:["profile"===v&&"Manage your artist profile and personal information","artworks"===v&&"View and manage your uploaded artworks","events"===v&&"Track your event participation and history","likes"===v&&"Browse artworks you've liked and saved","following"===v&&"Manage your following and followers lists","settings"===v&&"Configure your account preferences and settings"]})]}),e.jsxs("div",{className:"flex-1 p-8",children:["profile"===v&&e.jsx(P,{profile:y,stats:k,onProfileUpdate:L}),"artworks"===v&&e.jsx(M,{userId:null==s?void 0:s.id}),"events"===v&&e.jsx(I,{userId:null==s?void 0:s.id}),"likes"===v&&e.jsx(B,{userId:null==s?void 0:s.id}),"following"===v&&e.jsx(z,{showFollowing:!0,showFollowers:!0,compact:!1}),"settings"===v&&e.jsx(T,{user:s,onLogout:j})]})]},v)})})]})})})]})}export{S as default};
