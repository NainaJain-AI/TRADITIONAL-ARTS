import{r as e,j as t}from"./framerMotion-CogqvMXS.js";const r=({isOpen:r,onClose:a,reportType:s,targetId:o,targetName:n})=>{const[i,l]=e.useState(""),[c,d]=e.useState(""),[p,m]=e.useState(!1),h=()=>{l(""),d(""),m(!1),a()};if(!r)return null;const u={artwork:["Inappropriate Content","Copyright Infringement","Offensive Material","Spam or Misleading","Poor Quality","Other"],artist:["Inappropriate Behavior","Fake Profile","Harassment","Spam Content","Impersonation","Other"]}[s]||[];return t.jsx("div",{className:"report-modal-overlay",onClick:h,children:t.jsxs("div",{className:"report-modal-content",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"report-modal-header",children:[t.jsxs("h2",{children:["Report ","artwork"===s?"Artwork":"Artist"]}),t.jsx("button",{className:"report-modal-close-btn",onClick:h,disabled:p,children:"Ã—"})]}),t.jsxs("div",{className:"report-modal-body",children:[t.jsxs("p",{className:"report-target-info",children:["Reporting: ",t.jsx("strong",{children:n||`${s} #${o}`})]}),t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),i){m(!0);try{const e=localStorage.getItem("token"),t=await fetch("/api/reports",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({reportType:s,targetId:o,reason:i,description:c.trim()})});if(t.ok)alert("Report submitted successfully. Thank you for helping keep our community safe."),h();else{const e=await t.json();alert(e.message||"Failed to submit report. Please try again.")}}catch(t){alert("Failed to submit report. Please try again.")}finally{m(!1)}}else alert("Please select a reason for reporting.")},children:[t.jsxs("div",{className:"report-form-group",children:[t.jsx("label",{children:"Reason for reporting:"}),t.jsx("div",{className:"report-reasons-list",children:u.map(e=>t.jsxs("label",{className:"report-reason-option",children:[t.jsx("input",{type:"radio",name:"reason",value:e,checked:i===e,onChange:e=>l(e.target.value),disabled:p}),t.jsx("span",{children:e})]},e))})]}),t.jsxs("div",{className:"report-form-group",children:[t.jsx("label",{htmlFor:"description",children:"Additional details (optional):"}),t.jsx("textarea",{id:"description",placeholder:"Please provide any additional context or details about this report...",value:c,onChange:e=>d(e.target.value),rows:4,maxLength:1e3,disabled:p}),t.jsxs("small",{className:"char-count",children:[c.length,"/1000 characters"]})]}),t.jsxs("div",{className:"report-modal-actions",children:[t.jsx("button",{type:"button",className:"btn-cancel",onClick:h,disabled:p,children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn-submit-report",disabled:!i||p,children:p?"Submitting...":"Submit Report"})]})]})]})]})})};export{r as R};
