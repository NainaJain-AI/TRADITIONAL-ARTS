import{r as c,j as e,y as v,q as T,m as A,i as S,s as M,t as W,l as _,v as Y,w as z,u as V,F as q,x as G,z as K,e as X,A as J,B as Z,C as Q}from"./index-D3qpkmvJ.js";import{g as U,A as I,C as ee,a as te}from"./ArtCard-NlE2Qt8X.js";import{E as O}from"./EventModal-XAOP_OBZ.js";import{A as H}from"./index-5xPmm2RN.js";import{f as R,V as se,F as ae}from"./FollowButton-DD6GpQFF.js";import"./LazyImage-C3F1wNKI.js";const re=[{name:"Teal",bg:"bg-teal-500",text:"text-white"},{name:"Coral",bg:"bg-coral-red",text:"text-white"},{name:"Purple",bg:"bg-purple-500",text:"text-white"},{name:"Blue",bg:"bg-blue-500",text:"text-white"},{name:"Green",bg:"bg-green-500",text:"text-white"},{name:"Pink",bg:"bg-pink-500",text:"text-white"},{name:"Orange",bg:"bg-orange-500",text:"text-white"},{name:"Indigo",bg:"bg-indigo-500",text:"text-white"}];function le({currentAvatar:t,userName:l,onAvatarChange:a,isEditing:p=!1}){const[f,x]=c.useState(t!=null&&t.startsWith("http")||t!=null&&t.startsWith("data:")?"image":t!=null&&t.startsWith("color:")?"color":"initials"),[C,y]=c.useState(t!=null&&t.startsWith("color:")?(()=>{const d=t.split(":");return d.length>1?d[1]:"bg-teal-500"})():"bg-teal-500"),[w,m]=c.useState(f==="image"?t:null),[N,o]=c.useState(!1),h=c.useRef(),g=(l==null?void 0:l.split(" ").map(d=>d[0]).join("").toUpperCase().slice(0,2))||"?",i=d=>{if(!d)return;if(!d.type.startsWith("image/")){v.error("Please select an image file");return}if(d.size>5*1024*1024){v.error("Image size should be less than 5MB");return}const s=new FileReader;s.onload=E=>{const F=E.target.result;m(F),x("image"),a&&a(F)},s.readAsDataURL(d)},j=d=>{d.preventDefault(),o(!1);const s=d.dataTransfer.files[0];i(s)},L=d=>{d.preventDefault(),o(!0)},D=d=>{d.preventDefault(),o(!1)},r=d=>{const s=d.target.files[0];i(s)},k=d=>{y(d),x("color"),m(null),a&&a(`color:${d}`)},n=()=>{x("initials"),m(null),y("bg-teal-500"),a&&a("")},b=()=>{m(null),x("initials"),a&&a(""),h.current&&(h.current.value="")},u=()=>f==="image"&&w?e.jsx("img",{src:w,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg"}):f==="color"?e.jsx("div",{className:`w-32 h-32 rounded-full border-4 border-white shadow-lg flex items-center justify-center ${C} text-white`,children:e.jsx("span",{className:"text-3xl font-bold",children:g})}):e.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-white shadow-lg flex items-center justify-center bg-gray-200 text-gray-600",children:e.jsx("span",{className:"text-3xl font-bold",children:g})});return p?e.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[e.jsxs("div",{className:"relative",children:[u(),f==="image"&&e.jsx("button",{onClick:b,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-600 transition-colors",children:"×"})]}),e.jsxs("div",{className:"flex space-x-4 bg-gray-50 rounded-lg p-2",children:[e.jsx("button",{onClick:n,className:`px-4 py-2 rounded-lg font-medium transition-colors ${f==="initials"?"bg-white text-teal-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Initials"}),e.jsx("button",{onClick:()=>x("color"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${f==="color"?"bg-white text-teal-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Color"}),e.jsx("button",{onClick:()=>{var d;return(d=h.current)==null?void 0:d.click()},className:`px-4 py-2 rounded-lg font-medium transition-colors ${f==="image"?"bg-white text-teal-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Image"})]}),f==="color"&&e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Choose a color:"}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:re.map(d=>e.jsx("button",{onClick:()=>k(d.bg),className:`w-12 h-12 rounded-full ${d.bg} border-4 transition-all duration-200 ${C===d.bg?"border-gray-800 scale-110":"border-white hover:scale-105"}`,title:d.name},d.name))})]}),f==="image"&&e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("input",{ref:h,type:"file",accept:"image/*",onChange:r,className:"hidden"}),e.jsx("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${N?"border-teal-500 bg-teal-50":"border-gray-300 hover:border-gray-400"}`,onDrop:j,onDragOver:L,onDragLeave:D,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mx-auto w-12 h-12 text-gray-400",children:e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>{var d;return(d=h.current)==null?void 0:d.click()},className:"text-teal-600 hover:text-teal-700 font-medium",children:"Click to upload"}),e.jsx("p",{className:"text-gray-500",children:" or drag and drop"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 5MB"})]})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 max-w-md",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"💡 Profile Picture Tips"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"• Use a high-quality, well-lit photo"}),e.jsx("li",{children:"• Square images work best"}),e.jsx("li",{children:"• Make sure your face is clearly visible"}),e.jsx("li",{children:"• Choose colors that reflect your artistic style"})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center",children:[u(),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Profile Picture"})]})}function ne({userId:t}){const[l,a]=c.useState(null),[p,f]=c.useState(!0),[x,C]=c.useState(null);c.useEffect(()=>{y()},[]),c.useEffect(()=>{const o=()=>{console.log("RecentActivity: Artwork created, refreshing activity..."),y()};return window.addEventListener("artworkCreated",o),()=>{window.removeEventListener("artworkCreated",o)}},[]);const y=async()=>{try{f(!0);const o=await T.get("/api/users/activity");a(o.data.activity)}catch(o){console.error("Error loading activity:",o);try{const g=(await T.get("/api/users/stats")).data.stats;a({likedArtworks:[],bookmarkedArtworks:[],myArtworks:[],totalLikes:g.likesCount||0,totalBookmarks:g.bookmarksCount||0,totalArtworks:g.artworksCount||0})}catch(h){console.error("Error loading stats fallback:",h),C("Failed to load recent activity")}}finally{f(!1)}};if(p)return e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#E05264]"}),e.jsx("span",{className:"ml-3 text-[#134856] font-lora",children:"Loading activity..."})]});if(x)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"⚠️"}),e.jsx("p",{className:"text-lg font-lora text-red-500",children:x})]});if(l&&(l.likedArtworks&&l.likedArtworks.length>0||l.bookmarkedArtworks&&l.bookmarkedArtworks.length>0||l.myArtworks&&l.myArtworks.length>0),!l)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🎨"}),e.jsx("p",{className:"text-xl font-lora font-semibold text-[#E05264] mb-2",children:"No recent activity yet"}),e.jsx("p",{className:"text-[#F48C8C] font-lora",children:"Start exploring artworks to build your activity feed!"})]});const w=({item:o,type:h,icon:g})=>e.jsxs(A.div,{className:"flex items-center space-x-4 p-4 bg-white/50 rounded-xl hover:bg-white/70 transition-all cursor-pointer",whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},children:[e.jsx("div",{className:"flex-shrink-0",children:o.imageUrl?e.jsx("img",{src:o.imageUrl,alt:o.title,className:"w-12 h-12 rounded-lg object-cover border-2 border-white shadow-sm"}):e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-[#1d7c6f] to-[#f58c8c] flex items-center justify-center text-white text-xl",children:"🎨"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-lg",children:g}),e.jsxs("p",{className:"text-sm font-semibold text-[#134856] font-lora",children:[h==="liked"&&"Liked artwork",h==="bookmarked"&&"Bookmarked artwork",h==="created"&&"Created artwork"]})]}),e.jsx("p",{className:"text-base font-medium text-[#E05264] truncate font-dm-serif",children:o.title||"Untitled"}),e.jsxs("p",{className:"text-xs text-[#F48C8C] font-lora",children:[o.category&&`${o.category} • `,new Date(o.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]})]}),m=[];l.likedArtworks&&l.likedArtworks.forEach(o=>{m.push({...o,activityType:"liked",icon:"❤️"})}),l.bookmarkedArtworks&&l.bookmarkedArtworks.forEach(o=>{m.push({...o,activityType:"bookmarked",icon:"🔖"})}),l.myArtworks&&l.myArtworks.forEach(o=>{m.push({...o,activityType:"created",icon:"🎨"})}),m.sort((o,h)=>new Date(h.createdAt)-new Date(o.createdAt));const N=m.slice(0,10);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-3 bg-white/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-[#134856] font-dm-serif",children:l.totalLikes||0}),e.jsx("div",{className:"text-sm text-[#E05264] font-lora",children:"Likes"})]}),e.jsxs("div",{className:"text-center p-3 bg-white/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-[#134856] font-dm-serif",children:l.totalBookmarks||0}),e.jsx("div",{className:"text-sm text-[#E05264] font-lora",children:"Bookmarks"})]}),e.jsxs("div",{className:"text-center p-3 bg-white/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-[#134856] font-dm-serif",children:l.totalArtworks||0}),e.jsx("div",{className:"text-sm text-[#E05264] font-lora",children:"Artworks"})]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:N.length>0?N.map((o,h)=>e.jsx(A.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:h*.05},children:e.jsx(w,{item:o,type:o.activityType,icon:o.icon})},`activity-${o._id||o.id}-${h}`)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-3",children:"🎨"}),e.jsx("p",{className:"text-lg font-lora font-semibold text-[#E05264] mb-2",children:"No recent activities to show"}),e.jsx("p",{className:"text-[#F48C8C] font-lora text-sm",children:l.totalLikes+l.totalBookmarks+l.totalArtworks>0?"Your detailed activity will appear here as you interact with artworks.":"Start exploring artworks to build your activity feed!"})]})}),m.length>10&&e.jsx("div",{className:"text-center pt-4",children:e.jsx("p",{className:"text-sm text-[#F48C8C] font-lora",children:"Showing latest 10 activities"})})]})}function oe({profile:t,stats:l,onProfileUpdate:a}){var i,j,L,D,r,k;const[p,f]=c.useState(!1),[x,C]=c.useState({name:(t==null?void 0:t.name)||"",avatar:(t==null?void 0:t.avatar)||"",portfolioUrl:(t==null?void 0:t.portfolioUrl)||"",socialLinks:(t==null?void 0:t.socialLinks)||{instagram:"",twitter:"",website:""}}),[y,w]=c.useState(!1),[m,N]=c.useState(l);c.useEffect(()=>{N(l)},[l]),c.useEffect(()=>{const n=U.on(I.BOOKMARKED,d=>{d.userId===(t==null?void 0:t.id)&&N(s=>({...s,bookmarksCount:((s==null?void 0:s.bookmarksCount)||0)+1}))}),b=U.on(I.UNBOOKMARKED,d=>{d.userId===(t==null?void 0:t.id)&&N(s=>({...s,bookmarksCount:Math.max(((s==null?void 0:s.bookmarksCount)||0)-1,0)}))}),u=U.on(I.CREATED,d=>{d.userId===(t==null?void 0:t.id)&&(a==null||a())});return()=>{n(),b(),u()}},[t==null?void 0:t.id,a]);const o=()=>{f(!0),C({name:(t==null?void 0:t.name)||"",avatar:(t==null?void 0:t.avatar)||"",portfolioUrl:(t==null?void 0:t.portfolioUrl)||"",socialLinks:(t==null?void 0:t.socialLinks)||{instagram:"",twitter:"",website:""}})},h=async()=>{var n,b;w(!0);try{await T.put("/api/users/profile",x),v.success("Profile updated successfully!"),f(!1),a()}catch(u){v.error(((b=(n=u.response)==null?void 0:n.data)==null?void 0:b.message)||"Failed to update profile")}finally{w(!1)}},g=()=>{f(!1),C({name:(t==null?void 0:t.name)||"",avatar:(t==null?void 0:t.avatar)||"",portfolioUrl:(t==null?void 0:t.portfolioUrl)||"",socialLinks:(t==null?void 0:t.socialLinks)||{instagram:"",twitter:"",website:""}})};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs(A.div,{className:"flex items-center justify-between",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsx("h2",{className:"text-4xl font-bold font-dm-serif bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:"Artist Profile"}),!p&&e.jsx(A.button,{onClick:o,className:"bg-gradient-to-r from-[#1d7c6f] to-[#f58c8c] text-white px-6 py-3 rounded-full font-semibold shadow-lg hover:shadow-xl transition-all duration-300 font-dm-serif",whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:"Edit Profile"})]}),e.jsxs(A.div,{className:"grid md:grid-cols-5 gap-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[e.jsxs("div",{className:"md:col-span-3 flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"text-center lg:text-left",children:e.jsx(le,{currentAvatar:x.avatar,userName:t==null?void 0:t.name,onAvatarChange:n=>C({...x,avatar:n}),isEditing:p})}),e.jsx("div",{className:"flex-1",children:p?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-1",children:"Name"}),e.jsx("input",{type:"text",value:x.name,onChange:n=>C({...x,name:n.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-1",children:"Portfolio URL"}),e.jsx("input",{type:"url",value:x.portfolioUrl,onChange:n=>C({...x,portfolioUrl:n.target.value}),placeholder:"https://your-portfolio.com",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora"})]})]}):e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl font-bold font-dm-serif mb-2 bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:t==null?void 0:t.name}),e.jsx("p",{className:"text-xl font-lora font-semibold text-[#E05264] mb-4",children:t==null?void 0:t.email}),(t==null?void 0:t.portfolioUrl)&&e.jsx("a",{href:t.portfolioUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-[#134856] hover:text-[#E05264] font-lora font-semibold mb-4 transition-colors",children:"🌐 Portfolio"}),e.jsxs("div",{className:"text-sm font-lora text-[#F48C8C]",children:[e.jsxs("p",{children:["Member since: ",new Date(t==null?void 0:t.createdAt).toLocaleDateString()]}),e.jsxs("p",{children:["Last updated: ",new Date(t==null?void 0:t.updatedAt).toLocaleDateString()]})]})]})})]}),e.jsx("div",{className:"md:col-span-2",children:p?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-bold font-dm-serif text-[#134856] mb-3",children:"Social Links"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-1",children:"Instagram"}),e.jsx("input",{type:"url",value:x.socialLinks.instagram,onChange:n=>C({...x,socialLinks:{...x.socialLinks,instagram:n.target.value}}),placeholder:"https://instagram.com/username",className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-1",children:"Twitter"}),e.jsx("input",{type:"url",value:x.socialLinks.twitter,onChange:n=>C({...x,socialLinks:{...x.socialLinks,twitter:n.target.value}}),placeholder:"https://twitter.com/username",className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-1",children:"Website"}),e.jsx("input",{type:"url",value:x.socialLinks.website,onChange:n=>C({...x,socialLinks:{...x.socialLinks,website:n.target.value}}),placeholder:"https://your-website.com",className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora text-sm"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx(A.button,{onClick:h,disabled:y,className:"bg-gradient-to-r from-[#1d7c6f] to-[#f58c8c] text-white px-6 py-3 rounded-full font-semibold shadow-lg hover:shadow-xl transition-all duration-300 font-dm-serif disabled:opacity-50 flex-1",whileHover:{scale:y?1:1.05,y:y?0:-2},whileTap:{scale:y?1:.95},children:y?"Saving...":"Save"}),e.jsx(A.button,{onClick:g,className:"bg-white text-[#134856] border border-gray-300 px-6 py-3 rounded-full font-semibold hover:bg-gray-50 transition-all duration-300 font-dm-serif flex-1",whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:"Cancel"})]})]}):e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold font-dm-serif text-[#134856] mb-3",children:"Connect"}),e.jsxs("div",{className:"space-y-2",children:[((i=t==null?void 0:t.socialLinks)==null?void 0:i.instagram)&&e.jsx("a",{href:t.socialLinks.instagram,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-[#134856] hover:text-[#E05264] font-lora transition-colors",children:"📷 Instagram"}),((j=t==null?void 0:t.socialLinks)==null?void 0:j.twitter)&&e.jsx("a",{href:t.socialLinks.twitter,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-[#134856] hover:text-[#E05264] font-lora transition-colors",children:"🐦 Twitter"}),((L=t==null?void 0:t.socialLinks)==null?void 0:L.website)&&e.jsx("a",{href:t.socialLinks.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-[#134856] hover:text-[#E05264] font-lora transition-colors",children:"🌍 Website"}),!((D=t==null?void 0:t.socialLinks)!=null&&D.instagram)&&!((r=t==null?void 0:t.socialLinks)!=null&&r.twitter)&&!((k=t==null?void 0:t.socialLinks)!=null&&k.website)&&e.jsx("p",{className:"text-[#F48C8C] font-lora text-sm",children:"No social links added yet"})]})]})})]}),e.jsxs(A.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[e.jsx("h3",{className:"text-2xl font-bold font-dm-serif mb-6 bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:"Artist Statistics"}),e.jsx("div",{className:"h-px bg-gradient-to-r from-[#134856]/30 via-[#e05264]/30 to-[#134856]/30 mb-8"}),e.jsx(A.div,{className:"rounded-3xl p-8 bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] shadow-[0_0_30px_rgba(244,140,140,0.3)] text-white",whileHover:{scale:1.01},transition:{duration:.3},children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 text-center font-lora",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:(m==null?void 0:m.likesCount)||0}),e.jsx("div",{className:"text-sm font-medium",children:"Likes Given"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:(m==null?void 0:m.bookmarksCount)||0}),e.jsx("div",{className:"text-sm font-medium",children:"Bookmarks"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:(l==null?void 0:l.followsCount)||0}),e.jsx("div",{className:"text-sm font-medium",children:"Following"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:(l==null?void 0:l.followersCount)||0}),e.jsx("div",{className:"text-sm font-medium",children:"Followers"})]})]})})]}),e.jsxs(A.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:[e.jsx("h3",{className:"text-2xl font-bold font-dm-serif mb-6 bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:"Recent Activity"}),e.jsx("div",{className:"h-px bg-gradient-to-r from-[#134856]/30 via-[#e05264]/30 to-[#134856]/30 mb-8"}),e.jsx("div",{className:"bg-gray-50/80 border-2 border-[#e05264]/20 shadow-[0_0_20px_rgba(224,82,100,0.2)] rounded-2xl p-6",children:e.jsx(ne,{userId:t==null?void 0:t.id})})]})]})}function ie({user:t,onLogout:l}){const[a,p]=c.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[f,x]=c.useState({password:"",confirmText:""}),[C,y]=c.useState(!1),[w,m]=c.useState(!1),N=async h=>{var g,i;if(h.preventDefault(),a.newPassword!==a.confirmPassword){v.error("New passwords do not match");return}if(a.newPassword.length<6){v.error("New password must be at least 6 characters");return}m(!0);try{await T.put("/api/users/change-password",{currentPassword:a.currentPassword,newPassword:a.newPassword}),v.success("Password changed successfully!"),p({currentPassword:"",newPassword:"",confirmPassword:""})}catch(j){v.error(((i=(g=j.response)==null?void 0:g.data)==null?void 0:i.message)||"Failed to change password")}finally{m(!1)}},o=async h=>{var g,i;if(h.preventDefault(),f.confirmText!=="DELETE MY ACCOUNT"){v.error('Please type "DELETE MY ACCOUNT" to confirm');return}m(!0);try{await T.delete("/api/users/delete-account",{data:{password:f.password}}),v.success("Account deleted successfully"),l()}catch(j){v.error(((i=(g=j.response)==null?void 0:g.data)==null?void 0:i.message)||"Failed to delete account")}finally{m(!1)}};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsx(A.div,{className:"bg-gradient-to-br from-[#1d7c6f] to-[#f58c8c] rounded-3xl shadow-2xl p-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs("div",{className:"bg-[#F8E6DA] rounded-2xl p-8",children:[e.jsx("h2",{className:"text-3xl font-bold font-dm-serif mb-6 bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:"Change Password"}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-2",children:"Current Password"}),e.jsx("input",{type:"password",required:!0,value:a.currentPassword,onChange:h=>p({...a,currentPassword:h.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-2",children:"New Password"}),e.jsx("input",{type:"password",required:!0,minLength:"6",value:a.newPassword,onChange:h=>p({...a,newPassword:h.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-[#134856] mb-2",children:"Confirm New Password"}),e.jsx("input",{type:"password",required:!0,minLength:"6",value:a.confirmPassword,onChange:h=>p({...a,confirmPassword:h.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#E05264] focus:border-transparent font-lora"})]}),e.jsx(A.button,{type:"submit",disabled:w,className:"bg-gradient-to-r from-[#1d7c6f] to-[#f58c8c] text-white px-6 py-3 rounded-full font-semibold shadow-lg hover:shadow-xl transition-all duration-300 font-dm-serif disabled:opacity-50",whileHover:{scale:w?1:1.05,y:w?0:-2},whileTap:{scale:w?1:.95},children:w?"Changing Password...":"Change Password"})]})]})}),e.jsx(A.div,{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-3xl shadow-2xl p-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:e.jsxs("div",{className:"bg-[#F8E6DA] rounded-2xl p-8 border-l-4 border-red-500",children:[e.jsx("h2",{className:"text-3xl font-bold font-dm-serif text-red-600 mb-2",children:"⚠️ Danger Zone"}),e.jsx("p",{className:"text-[#E05264] font-lora mb-6",children:"Once you delete your account, there is no going back. Please be certain."}),C?e.jsxs("div",{className:"bg-red-50 rounded-2xl p-6 border border-red-200",children:[e.jsx("h3",{className:"text-xl font-bold font-dm-serif text-red-800 mb-4",children:"🚨 Oh no! You're in dangerous territory!"}),e.jsx("p",{className:"text-red-700 font-lora mb-4",children:"This action cannot be undone. This will permanently delete your account, all your artworks, likes, and followers. Are you absolutely sure?"}),e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-red-700 mb-2",children:"Enter your password to confirm:"}),e.jsx("input",{type:"password",required:!0,value:f.password,onChange:h=>x({...f,password:h.target.value}),className:"w-full px-4 py-3 border border-red-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent font-lora"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium font-lora text-red-700 mb-2",children:'Type "DELETE MY ACCOUNT" to confirm:'}),e.jsx("input",{type:"text",required:!0,value:f.confirmText,onChange:h=>x({...f,confirmText:h.target.value}),placeholder:"DELETE MY ACCOUNT",className:"w-full px-4 py-3 border border-red-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent font-lora"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(A.button,{type:"submit",disabled:w,className:"bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-3 rounded-full font-semibold shadow-lg hover:shadow-xl transition-all duration-300 font-dm-serif disabled:opacity-50",whileHover:{scale:w?1:1.05,y:w?0:-2},whileTap:{scale:w?1:.95},children:w?"Deleting Account...":"Yes, Delete My Account"}),e.jsx(A.button,{type:"button",onClick:()=>{y(!1),x({password:"",confirmText:""})},className:"bg-white text-[#134856] border border-gray-300 px-6 py-3 rounded-full font-semibold hover:bg-gray-50 transition-all duration-300 font-dm-serif",whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:"Cancel"})]})]})]}):e.jsx(A.button,{onClick:()=>y(!0),className:"bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-3 rounded-full font-semibold shadow-lg hover:shadow-xl transition-all duration-300 font-dm-serif",whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:"Delete My Account"})]})}),e.jsx(A.div,{className:"bg-gradient-to-br from-[#1d7c6f] to-[#f58c8c] rounded-3xl shadow-2xl p-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:e.jsxs("div",{className:"bg-[#F8E6DA] rounded-2xl p-8",children:[e.jsx("h2",{className:"text-3xl font-bold font-dm-serif mb-6 bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:"Account Information"}),e.jsxs("div",{className:"space-y-4 font-lora",children:[e.jsxs("div",{className:"text-[#134856]",children:[e.jsx("strong",{children:"Name:"})," ",e.jsx("span",{className:"text-[#E05264]",children:t==null?void 0:t.name})]}),e.jsxs("div",{className:"text-[#134856]",children:[e.jsx("strong",{children:"Email:"})," ",e.jsx("span",{className:"text-[#E05264]",children:t==null?void 0:t.email})]}),e.jsxs("div",{className:"text-[#134856]",children:[e.jsx("strong",{children:"Account Status:"}),e.jsx("span",{className:"ml-2 px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold",children:"Active"})]}),e.jsxs("div",{className:"text-[#134856]",children:[e.jsx("strong",{children:"Member Since:"})," ",e.jsx("span",{className:"text-[#E05264]",children:new Date((t==null?void 0:t.createdAt)||Date.now()).toLocaleDateString()})]})]})]})})]})}function de({userId:t}){const[l,a]=c.useState([]),[p,f]=c.useState(!0),[x,C]=c.useState("all"),[y,w]=c.useState(!1),[m,N]=c.useState(null);c.useEffect(()=>{o()},[t]),c.useEffect(()=>{const r=U.on(I.CREATED,d=>{d.userId===t&&o()}),k=U.on(I.UPDATED,d=>{d.userId===t&&o()}),n=U.on(I.DELETED,d=>{d.userId===t&&o()}),b=d=>{d.key==="artworkCreated"&&(o(),localStorage.removeItem("artworkCreated"))},u=()=>{o()};return window.addEventListener("storage",b),window.addEventListener("artworkCreated",u),()=>{r(),k(),n(),window.removeEventListener("storage",b),window.removeEventListener("artworkCreated",u)}},[t]);const o=async()=>{try{const r=await S.getCurrentUser();if(!r||!r.user)throw new Error("Failed to get current user");const k=r.user.id,n=await S.getArtworks({userId:k,limit:50}),b=(n==null?void 0:n.data)||n||[];a(Array.isArray(b)?b:[])}catch{v.error("Failed to load artworks"),a([])}finally{f(!1)}},h=async r=>{try{if(m){const k=await S.updateArtwork(m._id||m.id,r),n=k.data||k;a(b=>b.map(u=>(u._id||u.id)===(m._id||m.id)?n:u)),v.success("Your artwork has been updated successfully!")}else{const k=await S.createArtwork(r),n=k.data||k;a([n,...l]),v.success("Your artwork has been added successfully!")}w(!1),N(null)}catch{v.error(m?"Failed to update artwork":"Failed to create artwork")}},g=r=>{N(r),w(!0)},i=()=>{N(null),w(!0)},j=()=>{w(!1),N(null)},L=async r=>{if(window.confirm("Are you sure you want to delete this artwork?"))try{await S.deleteArtwork(r),a(n=>n.filter(b=>b._id!==r)),v.success("Artwork deleted successfully")}catch{v.error("Failed to delete artwork")}},D=l.filter(r=>x==="all"?!0:x==="published"?r.isPublic&&r.isActive:x==="draft"?!r.isPublic||!r.isActive:!0);return p?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"text-xl font-serif text-transparent bg-gradient-to-r from-[#E05264] to-[#134856] bg-clip-text",children:"Loading your artworks..."})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-serif font-bold text-transparent bg-gradient-to-r from-[#E05264] to-[#134856] bg-clip-text mb-2",children:"My Artworks"}),e.jsxs("p",{className:"text-gray-600 font-serif",children:[l.length," total artworks"]})]}),e.jsx("button",{onClick:i,className:"px-6 py-3 bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white rounded-full hover:shadow-lg transition-all duration-300 font-serif font-medium",children:"+ Add New Artwork"})]}),e.jsx("div",{className:"flex space-x-4 mb-8",children:[{id:"all",label:"All",count:l.length},{id:"published",label:"Published",count:l.filter(r=>r.isPublic&&r.isActive).length},{id:"draft",label:"Drafts",count:l.filter(r=>!r.isPublic||!r.isActive).length}].map(r=>e.jsxs(A.button,{onClick:()=>C(r.id),whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-6 py-3 rounded-full font-serif font-medium transition-all duration-300 ${x===r.id?"bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white shadow-lg":"bg-white/70 backdrop-blur-sm text-gray-700 hover:bg-white/90 border border-gray-200/50 hover:shadow-md"}`,children:[r.label," (",r.count,")"]},r.id))}),D.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🎨"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No artworks yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Start sharing your artistic creations with the community!"}),e.jsx("button",{onClick:i,className:"px-6 py-3 bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white rounded-lg hover:shadow-lg transition-all duration-300",children:"Create Your First Artwork"})]}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(r=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.imageUrl||r.image,alt:r.title,className:"w-full h-48 object-cover"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r.isPublic&&r.isActive?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:r.isPublic&&r.isActive?"✓ Published":"📝 Draft"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r.title}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600 transition-colors",children:"⋯"})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:r.category||r.artform}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx("span",{className:"text-red-500 mr-1",children:"❤️"}),e.jsxs("span",{className:"text-sm",children:[r.likes&&r.likes.length||0," likes"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>g(r),className:"px-3 py-1 text-sm text-white bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] hover:shadow-lg rounded transition-all duration-300",children:"Edit"}),e.jsx("button",{onClick:()=>L(r._id),className:"px-3 py-1 text-sm text-white bg-gradient-to-r from-red-500 to-red-600 hover:shadow-lg rounded transition-all duration-300",children:"Delete"})]})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-3",children:["Created ",r.createdAt?new Date(r.createdAt).toLocaleDateString():"N/A"]})]})]},r._id))}),e.jsxs("div",{className:"mt-12 rounded-2xl p-8 bg-gradient-to-br from-[#1D7C6F] to-[#F48C8C] text-white font-lora grid grid-cols-2 md:grid-cols-4 gap-6 shadow-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:l.length}),e.jsx("div",{children:"Total Artworks"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:l.filter(r=>r.isPublic&&r.isActive).length}),e.jsx("div",{children:"Published"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:l.reduce((r,k)=>{var n;return r+(((n=k.likes)==null?void 0:n.length)||0)},0)}),e.jsx("div",{children:"Total Likes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:l.length>0?Math.round(l.reduce((r,k)=>{var n;return r+(((n=k.likes)==null?void 0:n.length)||0)},0)/l.length):0}),e.jsx("div",{children:"Avg. Likes"})]})]}),e.jsx(ee,{isOpen:y,onClose:j,onSubmit:h,editingArtwork:m})]})}function ce({userId:t}){const[l,a]=c.useState([]),[p,f]=c.useState(!0),[x,C]=c.useState("all"),[y,w]=c.useState(!1),[m,N]=c.useState(null),[o,h]=c.useState({show:!1,eventId:null,eventTitle:""});c.useEffect(()=>{g()},[t]);const g=async()=>{try{const s=await S.getCurrentUser();if(!s||!s.user)throw new Error("Failed to get current user");const E=s.user.id;console.log("Loading events for user:",E);const F=await S.getEvents({organizer:E}),P=(F==null?void 0:F.data)||F||[];console.log("Loaded events:",P);const B=Array.isArray(P)?P.filter($=>$.organizer===E||$.organizerId===E||$.createdBy&&$.createdBy===E):[];a(B)}catch(s){console.error("Failed to load events:",s),v.error("Failed to load events"),a([])}finally{f(!1)}},i=async s=>{try{const E={id:Date.now(),...s,createdAt:new Date().toISOString(),organizer:t};a(F=>[E,...F]),v.success("Event created successfully!"),w(!1)}catch{v.error("Failed to create event")}},j=async s=>{try{const E={...m,...s,updatedAt:new Date().toISOString()};a(F=>F.map(P=>P.id===m.id?E:P)),v.success("Event updated successfully!"),N(null)}catch{v.error("Failed to update event")}},L=s=>{h({show:!0,eventId:s.id,eventTitle:s.title})},D=async()=>{try{await S.deleteEvent(o.eventId),a(s=>s.filter(E=>E.id!==o.eventId)),v.success("Event deleted successfully")}catch(s){console.error("Delete event error:",s),v.error("Failed to delete event")}finally{h({show:!1,eventId:null,eventTitle:""})}},r=()=>{h({show:!1,eventId:null,eventTitle:""})},k=s=>{N(s)},n=()=>{w(!1),N(null)},b=l.filter(s=>{if(x==="all")return!0;const E=new Date(s.date),F=new Date;return x==="upcoming"?E>=F:x==="past"?E<F:!0}),u=l.filter(s=>new Date(s.date)>=new Date),d=l.filter(s=>new Date(s.date)<new Date);return p?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"text-xl text-teal-600",children:"Loading your events..."})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-teal-800",children:"My Events"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[l.length," total events"]})]}),e.jsxs("button",{onClick:()=>w(!0),className:"px-6 py-3 bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white rounded-full hover:shadow-lg transition-all duration-300 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Event"]})]}),e.jsx("div",{className:"flex space-x-4 mb-8",children:[{id:"all",label:"All",count:l.length},{id:"upcoming",label:"Upcoming",count:u.length},{id:"past",label:"Past",count:d.length}].map(s=>e.jsxs("button",{onClick:()=>C(s.id),className:`px-4 py-2 rounded-lg font-medium transition-colors ${x===s.id?"bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"}`,children:[s.label," (",s.count,")"]},s.id))}),b.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📅"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No events yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Start organizing events to engage with the traditional arts community!"}),e.jsx("button",{onClick:()=>w(!0),className:"px-6 py-3 bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white rounded-full hover:shadow-lg transition-all duration-300",children:"Create Your First Event"})]}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(s=>{var P,B;const E=new Date(s.date),F=E>=new Date;return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"relative",children:[s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-48 object-cover"}):e.jsx("div",{className:"w-full h-48 bg-gradient-to-br from-teal-100 to-blue-100 flex items-center justify-center",children:e.jsx("div",{className:"text-6xl text-teal-400",children:"🎭"})}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:F?"📅 Upcoming":"🕐 Past"})}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:"bg-white bg-opacity-90 px-2 py-1 rounded-full text-xs font-medium text-gray-700",children:s.type?s.type.charAt(0).toUpperCase()+s.type.slice(1):"Event"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2",children:s.title})}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-500 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsxs("span",{children:[E.toLocaleDateString()," at ",s.time||"TBD"]})]}),s.location&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsxs("span",{className:"truncate",children:[((P=s.location)==null?void 0:P.venue)||"TBD",", ",((B=s.location)==null?void 0:B.city)||"TBD"]})]}),s.price>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),e.jsxs("span",{children:["₹",s.price]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["Created ",new Date(s.createdAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>k(s),className:"px-3 py-1 text-sm text-white bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] hover:shadow-lg rounded-full transition-all duration-300",children:"Edit"}),e.jsx("button",{onClick:()=>L(s),className:"px-3 py-1 text-sm text-white bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] hover:shadow-lg rounded-full transition-all duration-300",children:"Delete"})]})]})]})]},s.id)})}),e.jsxs("div",{className:"mt-12 rounded-2xl p-8 bg-gradient-to-r from-[#1D7C6F] to-[#F48C8C] text-white font-lora grid grid-cols-2 md:grid-cols-4 gap-6 shadow-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:l.length}),e.jsx("div",{children:"Total Events"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:u.length}),e.jsx("div",{children:"Upcoming"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:d.length}),e.jsx("div",{children:"Completed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:l.filter(s=>s.registrationRequired===!0).length}),e.jsx("div",{children:"With Registration"})]})]}),e.jsx(O,{isOpen:y,onClose:n,onSubmit:i}),m&&e.jsx(O,{isOpen:!!m,onClose:n,onSubmit:j,event:m,isEditing:!0}),e.jsx(H,{children:o.show&&e.jsx(A.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(A.div,{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:50},transition:{duration:.3},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Delete Event"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to delete "',e.jsx("span",{className:"font-medium text-gray-900",children:o.eventTitle}),'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:D,className:"flex-1 bg-gradient-to-r from-red-500 to-red-600 text-white px-4 py-2 rounded-lg font-semibold hover:from-red-600 hover:to-red-700 transition-all duration-300",children:"Delete Event"})]})]})})})})]})}const xe=({userId:t})=>{const[l,a]=c.useState([]),[p,f]=c.useState([]),[x,C]=c.useState(!0),[y,w]=c.useState("liked");c.useEffect(()=>{m()},[t]);const m=async()=>{try{C(!0);const g=await S.getCurrentUser();if(!g||!g.user)throw new Error("Failed to get current user");const i=g.user,j=i.likes||[],L=i.bookmarks||[];if(console.log("Loading liked/bookmarked artworks for user:",i.id),console.log("User likes array:",j),console.log("User bookmarks array:",L),j.length===0&&L.length===0){console.log("User has no likes or bookmarks"),a([]),f([]);return}const D=await S.getArtworks({limit:200}),r=(D==null?void 0:D.data)||D||[];if(console.log("All artworks loaded:",r.length),Array.isArray(r)){const k=r.map(u=>({id:u._id||u.id,title:u.title||u.name,description:u.description,artist:u.artist||"Cultural Heritage",imageUrl:u.imageUrl||u.image,category:u.category||"Traditional Art",likes:u.likes||0,bookmarks:u.bookmarks||0,views:u.views||0,createdAt:u.createdAt||new Date().toISOString(),userId:u.userId||u.artistId,origin:u.origin})),n=k.filter(u=>{const d=u.id.toString(),s=j.some(E=>E.toString()===d);return s&&console.log("Found liked artwork:",u.title),s}),b=k.filter(u=>{const d=u.id.toString(),s=L.some(E=>E.toString()===d);return s&&console.log("Found bookmarked artwork:",u.title),s});console.log("Filtered liked artworks:",n.length),console.log("Filtered bookmarked artworks:",b.length),a(n),f(b)}else console.log("No artworks data or invalid format"),a([]),f([])}catch(g){console.error("Error fetching user artwork data:",g),v.error("Failed to load your artworks"),a([]),f([])}finally{C(!1)}},N=async g=>{try{await S.toggleLike(g),a(i=>i.filter(j=>j.id!==g)),v.success("Artwork unliked")}catch(i){console.error("Error toggling like:",i),v.error("Failed to update like")}},o=async g=>{try{await S.toggleBookmark(g),f(i=>i.filter(j=>j.id!==g)),v.success("Bookmark removed")}catch(i){console.error("Error toggling bookmark:",i),v.error("Failed to update bookmark")}},h=y==="liked"?l:p;return x?e.jsx("div",{className:"flex justify-center items-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#E05264]"})}):e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("div",{className:"bg-white rounded-full p-1 shadow-lg border border-gray-200",children:[e.jsxs("button",{onClick:()=>w("liked"),className:`px-6 py-3 rounded-full font-semibold text-sm transition-all duration-300 flex items-center gap-2 ${y==="liked"?"bg-gradient-to-r from-[#1d7c6f] to-[#f58c8c] text-white shadow-lg":"text-[#134856] hover:bg-gray-50"} font-dm-serif`,children:[e.jsx(M,{className:"text-red-500"}),"Liked Artworks (",l.length,")"]}),e.jsxs("button",{onClick:()=>w("bookmarked"),className:`px-6 py-3 rounded-full font-semibold text-sm transition-all duration-300 flex items-center gap-2 ${y==="bookmarked"?"bg-gradient-to-r from-[#1d7c6f] to-[#f58c8c] text-white shadow-lg":"text-[#134856] hover:bg-gray-50"} font-dm-serif`,children:[e.jsx(W,{className:"text-amber-600"}),"Bookmarked (",p.length,")"]})]})}),h.length===0?e.jsxs(A.div,{className:"text-center py-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsx("div",{className:"text-6xl mb-4",children:y==="liked"?"❤️":"🔖"}),e.jsxs("h3",{className:"text-2xl font-semibold font-dm-serif mb-2 bg-gradient-to-r from-[#134856] to-[#e05264] bg-clip-text text-transparent",children:["No ",y==="liked"?"Liked":"Bookmarked"," Artworks"]}),e.jsxs("p",{className:"text-[#E05264] font-lora mb-4",children:["You haven't ",y==="liked"?"liked":"bookmarked"," any artworks yet."]}),e.jsxs("p",{className:"text-gray-500 font-lora",children:["Visit the Art Wall to discover and ",y==="liked"?"like":"bookmark"," amazing artworks!"]})]}):e.jsx(A.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},children:h.map((g,i)=>e.jsx(te,{artwork:g,index:i,currentUser:{likes:l.map(j=>j.id)},isBookmarked:y==="bookmarked"||p.some(j=>j.id===g.id),onLike:N,onBookmark:o,onImageClick:()=>{}},g.id))})]})},me=({showFollowing:t=!0,showFollowers:l=!0,compact:a=!1})=>{const[p,f]=c.useState([]),[x,C]=c.useState([]),[y,w]=c.useState(!0),[m,N]=c.useState("following"),{isAuthenticated:o}=_();c.useEffect(()=>{o&&h()},[o]);const h=async()=>{try{w(!0);const i=[];t&&i.push(R.getFollowing()),l&&i.push(R.getFollowers());const j=await Promise.all(i);let L=0;if(t){const D=j[L];D.success&&f(D.following||[]),L++}if(l){const D=j[L];D.success&&C(D.followers||[])}}catch(i){console.error("Error fetching following data:",i)}finally{w(!1)}},g=({user:i,showFollowButton:j=!0})=>e.jsx(A.div,{className:`
        bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden
        ${a?"p-3":"p-4"}
      `,whileHover:{y:-2},initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"relative",children:e.jsx("img",{src:i.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(i.name)}&background=134856&color=fff`,alt:i.name,className:`rounded-full object-cover ${a?"w-10 h-10":"w-12 h-12"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:`font-semibold text-gray-900 truncate ${a?"text-sm":"text-base"}`,children:i.name}),e.jsx(se,{isVerified:i.isVerified,size:"xs"})]}),i.specialization&&e.jsx("p",{className:`text-gray-600 truncate ${a?"text-xs":"text-sm"}`,children:i.specialization}),i.location&&e.jsxs("p",{className:`text-gray-500 truncate ${a?"text-xs":"text-sm"}`,children:["📍 ",i.location]})]}),j&&e.jsx(ae,{userId:i._id,className:a?"px-3 py-1 text-xs":"px-4 py-2 text-sm"})]})});return o?y?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading following data..."})]}):e.jsxs("div",{className:`space-y-6 ${a?"":"max-w-4xl mx-auto"}`,children:[t&&l&&e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>N("following"),className:`
              flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-md transition-all duration-200
              ${m==="following"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}
            `,children:[e.jsx(z,{size:16}),e.jsxs("span",{children:["Following (",p.length,")"]})]}),e.jsxs("button",{onClick:()=>N("followers"),className:`
              flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-md transition-all duration-200
              ${m==="followers"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}
            `,children:[e.jsx(M,{size:16}),e.jsxs("span",{children:["Followers (",x.length,")"]})]})]}),(m==="following"||!l)&&t&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(z,{className:"text-blue-600"}),"Following (",p.length,")"]}),p.length===0?e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[e.jsx(z,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-600 mb-2",children:"You're not following anyone yet"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Discover artists and start following to see their latest works!"})]}):e.jsx("div",{className:`grid gap-4 ${a?"grid-cols-1":"grid-cols-1 md:grid-cols-2"}`,children:p.map(i=>e.jsx(g,{user:i,showFollowButton:!1},i._id))})]}),(m==="followers"||!t)&&l&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(M,{className:"text-red-500"}),"Followers (",x.length,")"]}),x.length===0?e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[e.jsx(M,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-600 mb-2",children:"No followers yet"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Share amazing artworks to attract followers!"})]}):e.jsx("div",{className:`grid gap-4 ${a?"grid-cols-1":"grid-cols-1 md:grid-cols-2"}`,children:x.map(i=>e.jsx(g,{user:i,showFollowButton:!0},i._id))})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Y,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"Please log in to see your following lists."})]})};function je(){var k;const{user:t,logout:l}=_(),[a,p]=c.useState("profile"),[f,x]=c.useState(null),[C,y]=c.useState(null),[w,m]=c.useState(!1),N=V();c.useEffect(()=>{if(!t){N("/login");return}o()},[t,N]);const o=async()=>{try{m(!0);const[n,b]=await Promise.all([T.get("/api/users/profile"),T.get("/api/users/stats")]);x(n.data.user),y(b.data.stats)}catch(n){console.error("Error loading user data:",n),v.error("Failed to load user data"),x({name:t==null?void 0:t.name,avatar:null}),y({totalArtworks:0,totalLikes:0,totalViews:0,likesCount:0,bookmarksCount:0,followsCount:0,followersCount:0,artworksCount:0})}finally{m(!1)}},h=async()=>{await l(),v.success("Logged out successfully"),N("/login")},g=()=>{const n=Array.from({length:20},(b,u)=>({id:u,size:Math.random()*4+2,color:["rgba(19, 72, 86, 0.6)","rgba(224, 82, 100, 0.6)","rgba(244, 140, 140, 0.6)","rgba(29, 124, 111, 0.6)","rgba(255, 215, 0, 0.6)"][Math.floor(Math.random()*5)],initialX:Math.random()*100,initialY:Math.random()*100,animationDelay:Math.random()*5,animationDuration:8+Math.random()*6}));return e.jsx("div",{className:"fixed inset-0 pointer-events-none z-0",children:n.map(b=>e.jsx(A.div,{className:"absolute rounded-full opacity-40",style:{width:`${b.size}px`,height:`${b.size}px`,backgroundColor:b.color,left:`${b.initialX}%`,top:`${b.initialY}%`,filter:"blur(0.5px)",boxShadow:`0 0 ${b.size*2}px ${b.color}`},animate:{y:[0,-80,0],x:[0,25,-25,0],opacity:[.4,.7,.4],scale:[1,1.3,1]},transition:{duration:b.animationDuration,repeat:1/0,delay:b.animationDelay,ease:"easeInOut"}},b.id))})},[i,j]=c.useState(!1),L=[{id:"profile",label:"Profile",icon:K},{id:"artworks",label:"My Artworks",icon:X},{id:"events",label:"My Events",icon:J},{id:"likes",label:"Liked Posts",icon:M},{id:"following",label:"Following & Followers",icon:z}],D=[{id:"settings",label:"Settings",icon:Z},{id:"logout",label:"Logout",icon:Q,isAction:!0}];if(w)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#F48C8C]/10 via-white to-[#134856]/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-[#E05264] mx-auto mb-4"}),e.jsx("p",{className:"text-2xl font-dm-serif text-transparent bg-clip-text bg-gradient-to-r from-[#E05264] to-[#134856]",children:"Loading your dashboard..."})]})});const r=n=>{n==="logout"?h():p(n),j(!1)};return e.jsxs("div",{className:"min-h-screen bg-blush-peach",children:[e.jsx(g,{}),e.jsx(q,{}),e.jsx("button",{onClick:()=>j(!i),className:"md:hidden fixed top-4 left-4 z-50 p-3 bg-white rounded-2xl shadow-lg text-[#134856] hover:text-[#E05264] transition-all duration-200",children:e.jsx(G,{className:"w-5 h-5"})}),i&&e.jsx("div",{className:"fixed inset-0 z-30 bg-gray-600 bg-opacity-50 md:hidden",onClick:()=>j(!1)}),e.jsx("div",{className:"px-10 mt-10 mx-auto pb-10",children:e.jsx("div",{className:"rounded-3xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"flex",children:[e.jsx("aside",{className:`${i?"translate-x-0":"-translate-x-full"} fixed inset-y-0 left-0 z-40 w-80 transform transition-transform duration-300 ease-in-out md:translate-x-0 md:static md:w-80 md:flex-shrink-0 bg-gradient-to-b from-[#134856] to-[#E05264]`,children:e.jsxs("div",{className:"h-full px-6 py-8 overflow-y-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-3xl font-bold font-dm-serif text-white",children:"Dashboard"}),e.jsx("p",{className:"text-white text-sm mt-1 font-lora",children:"Navigate your workspace"}),e.jsx("div",{className:"mt-4 h-px bg-white/20"}),e.jsxs("div",{className:"mt-4 flex items-center space-x-3",children:[e.jsx("img",{src:(f==null?void 0:f.avatar)||"/default-avatar.png",alt:t==null?void 0:t.name,className:"w-12 h-12 rounded-full border-2 border-white shadow-sm"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate font-dm-serif",children:t==null?void 0:t.name}),e.jsx("p",{className:"text-xs text-white/70 truncate font-lora",children:"Artist Account"})]})]}),e.jsx("div",{className:"mt-4 h-px bg-white/20"})]}),e.jsxs("nav",{className:"space-y-2",children:[L.map(n=>{const b=n.icon,u=a===n.id;return e.jsxs("button",{onClick:()=>r(n.id),className:`w-full flex items-center px-4 py-3 text-left rounded-2xl transition-all duration-200 font-lora ${u?"bg-gradient-to-r from-[#E05264] to-[#E05264]/90 text-white shadow-md transform scale-[1.02]":"text-white hover:bg-white/10 hover:shadow-sm"}`,children:[e.jsx(b,{className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-medium",children:n.label})]},n.id)}),e.jsx("div",{className:"mt-6 mb-4 h-px bg-white/20"}),D.map(n=>{const b=n.icon,u=a===n.id,d=n.id==="logout";return e.jsxs("button",{onClick:()=>r(n.id),className:`w-full flex items-center px-4 py-3 text-left rounded-2xl transition-all duration-200 font-lora ${d?"text-white hover:bg-red-500/20 hover:text-red-200":u?"bg-gradient-to-r from-[#E05264] to-[#E05264]/90 text-white shadow-md transform scale-[1.02]":"text-white hover:bg-white/10 hover:shadow-sm"}`,children:[e.jsx(b,{className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-medium",children:n.label})]},n.id)})]})]})}),e.jsx("div",{className:"hidden md:block w-px bg-gray-200"}),e.jsx("main",{className:"flex-1 flex flex-col min-w-0 bg-white",children:e.jsx(H,{mode:"wait",children:e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"bg-gradient-to-r from-[#134856] to-[#E05264] px-8 py-6 border-b border-gray-100",children:[e.jsx("h2",{className:"text-4xl font-bold text-white capitalize font-dm-serif",children:(k=[...L,...D].find(n=>n.id===a&&!n.isAction))==null?void 0:k.label}),e.jsxs("p",{className:"text-white text-2xl text-sm mt-1 font-lora",children:[a==="profile"&&"Manage your artist profile and personal information",a==="artworks"&&"View and manage your uploaded artworks",a==="events"&&"Track your event participation and history",a==="likes"&&"Browse artworks you've liked and saved",a==="following"&&"Manage your following and followers lists",a==="settings"&&"Configure your account preferences and settings"]})]}),e.jsxs("div",{className:"flex-1 p-8",children:[a==="profile"&&e.jsx(oe,{profile:f,stats:C,onProfileUpdate:o}),a==="artworks"&&e.jsx(de,{userId:t==null?void 0:t.id}),a==="events"&&e.jsx(ce,{userId:t==null?void 0:t.id}),a==="likes"&&e.jsx(xe,{userId:t==null?void 0:t.id}),a==="following"&&e.jsx(me,{showFollowing:!0,showFollowers:!0,compact:!1}),a==="settings"&&e.jsx(ie,{user:t,onLogout:h})]})]},a)})})]})})})]})}export{je as default};
