import{h as v,j as s,r as f,l as b,a8 as $,$ as k,y as m}from"./index-D3qpkmvJ.js";const A="https://your-production-api-url.com",n=v.create({baseURL:A});n.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const g={followUser:async e=>(await n.post(`/api/following/follow/${e}`)).data,unfollowUser:async e=>(await n.post(`/api/following/unfollow/${e}`)).data,getFollowing:async()=>(await n.get("/api/following/following")).data,getFollowers:async()=>(await n.get("/api/following/followers")).data,isFollowing:async e=>{try{const t=await n.get("/api/following/following");return t.data.success?t.data.following.some(l=>l._id===e):!1}catch(t){return console.error("Error checking follow status:",t),!1}}},N=({isVerified:e,size:t="sm",className:l=""})=>{if(!e)return null;const r={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return s.jsx("div",{className:`inline-flex items-center justify-center ${l}`,title:"Verified Artist",children:s.jsx("svg",{className:`${r[t]} text-blue-500`,fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})},U=({userId:e,className:t="",onFollowChange:l})=>{const[r,w]=f.useState(!1),[d,u]=f.useState(!1),[y,h]=f.useState(0),{user:o,isAuthenticated:c}=b();f.useEffect(()=>{c&&e&&e!==(o==null?void 0:o.id)&&e!==(o==null?void 0:o._id)&&j()},[e,c,o]);const j=async()=>{try{const a=await g.isFollowing(e);w(a)}catch(a){console.error("Error checking follow status:",a)}},F=async()=>{var a,x;if(!c){alert("Please login to follow artists");return}if(e===(o==null?void 0:o.id)||e===(o==null?void 0:o._id)){alert("You cannot follow yourself");return}u(!0);try{let i;r?(i=await g.unfollowUser(e),w(!1),h(p=>Math.max(0,p-1)),m.info("Unfollowed artist")):(i=await g.followUser(e),w(!0),h(p=>p+1),m.success("Following artist! They will be notified.")),l&&l(r,y)}catch(i){console.error("Error toggling follow:",i),alert(((x=(a=i.response)==null?void 0:a.data)==null?void 0:x.message)||"Failed to update follow status")}finally{u(!1)}};return!c||e===(o==null?void 0:o.id)||e===(o==null?void 0:o._id)?null:s.jsx("button",{onClick:F,disabled:d,className:`
        bg-gradient-to-r from-[#134856] to-[#e05264] text-white px-6 py-3 rounded-full hover:shadow-lg transition-all font-dm-serif text-sm font-semibold flex items-center gap-2
        ${d?"opacity-50 cursor-not-allowed":"cursor-pointer hover:scale-105"}
        ${t}
      `,children:d?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Loading..."})]}):r?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($,{size:14}),s.jsx("span",{children:"Following"})]}):s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(k,{size:14}),s.jsx("span",{children:"Follow"})]})})};export{U as F,N as V,g as f};
